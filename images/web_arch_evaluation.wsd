@startuml

title 上古时代

cloud {
    [应用服务器]
}

database "数据库" {
    [Database]
}

[应用服务器] - [Database]

@enduml
------------------------------------------------------------
@startuml

title 读写分离

cloud {
    [应用服务器]
}

database "Database" {
    [Master] -> [Slave] : Sync
}

[应用服务器] -> [Master] : Write
[应用服务器] <- [Slave] : Read

@enduml
------------------------------------------------------------
@startuml

title 负载均衡

cloud "应用服务器集群" {
    [应用服务器 1] .. [应用服务器 2]
}

database "Database" {
    [Master] -> [Slave] : Sync
}

[负载均衡服务器] -> [应用服务器 1]
[应用服务器 2] -> [Master] : Write
[应用服务器 2] <- [Slave] : Read

@enduml

------------------------------------------------------------
@startuml

title 动静分离

cloud "动态内容服务器集群" {
    [应用服务器 1] .. [应用服务器 2]
}

cloud "静态内容服务器集群" {
    [静态内容服务器 1] .. [静态内容服务器 2]
}

database "Database" {
    [Master] -> [Slave] : Sync
}

[负载均衡服务器] -> [静态内容服务器 1]
[负载均衡服务器] -> [应用服务器 1]
[应用服务器 2] -> [Master] : Write
[应用服务器 2] <- [Slave] : Read

@enduml

------------------------------------------------------------
@startuml

title 内容分发网络

cloud "动态内容服务器集群 1" {
    [应用服务器 1-1] .. [应用服务器 1-2]
}

cloud "静态内容服务器集群 1" {
    [静态内容服务器 1-1] .. [静态内容服务器 1-2]
}

cloud "动态内容服务器集群 2" {
    [应用服务器 2-1] .. [应用服务器 2-2]
}

cloud "静态内容服务器集群 2" {
    [静态内容服务器 2-1] .. [静态内容服务器 2-2]
}

database "Database" {
    [Master] -> [Slave] : Sync
}

[动态 DNS 解析] -> [负载均衡服务器 1]
[动态 DNS 解析] -> [负载均衡服务器 2]
[负载均衡服务器 1] -> [静态内容服务器 1-1]
[负载均衡服务器 1] -> [应用服务器 1-1]
[负载均衡服务器 2] -> [静态内容服务器 2-1]
[负载均衡服务器 2] -> [应用服务器 2-1]
[应用服务器 1-2] - [Master]
[应用服务器 2-2] - [Slave]

@enduml
------------------------------------------------------------
@startuml

title 分布式服务器

cloud "动态内容服务器集群 1" {
    [应用服务器 1-1] .. [应用服务器 1-2]
}

cloud "静态内容服务器集群 1" {
    [静态内容服务器 1-1] .. [静态内容服务器 1-2]
}

cloud "动态内容服务器集群 2" {
    [应用服务器 2-1] .. [应用服务器 2-2]
}

cloud "静态内容服务器集群 2" {
    [静态内容服务器 2-1] .. [静态内容服务器 2-2]
}

cloud "分布式数据库集群" {
    [数据库路由]
}

database "Database 1" {
    [Master1] -> [Slave1] : Sync
}

database "Database 2" {
    [Master2] -> [Slave2] : Sync
}

database "Database 3" {
    [Master3] -> [Slave3] : Sync
}

[动态 DNS 解析] -> [负载均衡服务器 1]
[动态 DNS 解析] -> [负载均衡服务器 2]
[负载均衡服务器 1] -> [静态内容服务器 1-1]
[负载均衡服务器 1] -> [应用服务器 1-1]
[负载均衡服务器 2] -> [静态内容服务器 2-1]
[负载均衡服务器 2] -> [应用服务器 2-1]
[应用服务器 1-2] - [数据库路由]
[应用服务器 2-2] - [数据库路由]
[数据库路由] - [Master1]
[数据库路由] - [Master2]
[数据库路由] - [Master3]
[Slave1] - [Master2] : Sync
[Master1] - [Slave3]: Sync

@enduml
------------------------------------------------------------
@startuml

title 数据缓存

cloud "动态内容服务器集群 1" {
    [应用服务器 1-1] .. [应用服务器 1-2]
}

cloud "静态内容服务器集群 1" {
    [静态内容服务器 1-1] .. [静态内容服务器 1-2]
}

cloud "动态内容服务器集群 2" {
    [应用服务器 2-1] .. [应用服务器 2-2]
}

cloud "静态内容服务器集群 2" {
    [静态内容服务器 2-1] .. [静态内容服务器 2-2]
}

cloud "分布式数据库集群" {
    [数据库路由]
}

cloud "数据缓存服务" {
    [Redis]
    [Memcached]
}

database "Database 1" {
    [Master1] -> [Slave1] : Sync
}

database "Database 2" {
    [Master2] -> [Slave2] : Sync
}

database "Database 3" {
    [Master3] -> [Slave3] : Sync
}

[动态 DNS 解析] -> [负载均衡服务器 1]
[动态 DNS 解析] -> [负载均衡服务器 2]
[负载均衡服务器 1] -> [静态内容服务器 1-1]
[负载均衡服务器 1] -> [应用服务器 1-1]
[负载均衡服务器 2] -> [静态内容服务器 2-1]
[负载均衡服务器 2] -> [应用服务器 2-1]
[应用服务器 1-2] - [数据库路由]
[应用服务器 2-2] - [数据库路由]
[数据库路由] - [Master1]
[数据库路由] - [Master2]
[数据库路由] - [Master3]
[Slave1] - [Master2] : Sync
[Master1] - [Slave3]: Sync
[数据库路由] - [Redis]
[数据库路由] - [Memcached]

@enduml
