





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
  <link rel="dns-prefetch" href="https://assets-cdn.github.com">
  <link rel="dns-prefetch" href="https://avatars0.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars1.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars2.githubusercontent.com">
  <link rel="dns-prefetch" href="https://avatars3.githubusercontent.com">
  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
  <link rel="dns-prefetch" href="https://user-images.githubusercontent.com/">



  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-7db951ed87f8f6cbd3a9e89c294e300cf23c1a83ad7ae64c70b8f99b21031340.css" integrity="sha256-fblR7Yf49svTqeicKU4wDPI8GoOteuZMcLj5myEDE0A=" media="all" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-7b4e17697260b0150413dc0cb251639730e0ff52161f1acbe15e4e90e59b6351.css" integrity="sha256-e04XaXJgsBUEE9wMslFjlzDg/1IWHxrL4V5OkOWbY1E=" media="all" rel="stylesheet" />
  
  
  
  

  <meta name="viewport" content="width=device-width">
  
  <title>web/zigbee_networking_layer.md at master Â· wuzhongtao/web</title>
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta content="https://avatars2.githubusercontent.com/u/28773505?v=4&amp;s=400" property="og:image" /><meta content="GitHub" property="og:site_name" /><meta content="object" property="og:type" /><meta content="wuzhongtao/web" property="og:title" /><meta content="https://github.com/wuzhongtao/web" property="og:url" /><meta content="web test" property="og:description" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  <link rel="web-socket" href="wss://live.github.com/_sockets/VjI6MjAxOTQ1NTkwOjlmOGYwMDkyNDdhMmFlYjVmODU0MzgxMmY1ZWU2ZDlkMWY1Nzg0MmE5MDYxYWJjMzg0MTIzMDNiMDk3OWZiZGM=--6c504f6f9f55e7eb3320458d601035f996b14aa8">
  <meta name="pjax-timeout" content="1000">
  <link rel="sudo-modal" href="/sessions/sudo_modal">
  <meta name="request-id" content="C893:2BD83:7F5C92:C172CC:59A82768" data-pjax-transient>
  

  <meta name="selected-link" value="repo_source" data-pjax-transient>

  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
<meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="C893:2BD83:7F5C92:C172CC:59A82768" name="octolytics-dimension-request_id" /><meta content="sea" name="octolytics-dimension-region_edge" /><meta content="iad" name="octolytics-dimension-region_render" /><meta content="28773505" name="octolytics-actor-id" /><meta content="wuzhongtao" name="octolytics-actor-login" /><meta content="c132731606c5b60778066d6b852980c18a1db3cf8acc1e831a7a297d4a9c620b" name="octolytics-actor-hash" />
<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />




  <meta class="js-ga-set" name="dimension1" content="Logged In">


  

      <meta name="hostname" content="github.com">
  <meta name="user-login" content="wuzhongtao">

      <meta name="expected-hostname" content="github.com">
    <meta name="js-proxy-site-detection-payload" content="NTMxNzdhMjVjY2NjYzkxMjUzNTQ5YTE0MTc4Y2E4ZmU4Nzk1MWNmYjk3MWY1NGNlZWUxMGYyYzNkMTFjMjk2M3x7InJlbW90ZV9hZGRyZXNzIjoiMTgzLjE1LjE4My4xNzgiLCJyZXF1ZXN0X2lkIjoiQzg5MzoyQkQ4Mzo3RjVDOTI6QzE3MkNDOjU5QTgyNzY4IiwidGltZXN0YW1wIjoxNTA0MTkyMzYzLCJob3N0IjoiZ2l0aHViLmNvbSJ9">

    <meta name="enabled-features" content="UNIVERSE_BANNER">

  <meta name="html-safe-nonce" content="dc7d9955c763d0a5a5474fb42266ab001a22b7d0">

  <meta http-equiv="x-pjax-version" content="6ce42d2e2fa6ec62762f8b0b7106bb52">
  

      <link href="https://github.com/wuzhongtao/web/commits/master.atom" rel="alternate" title="Recent Commits to web:master" type="application/atom+xml">

  <meta name="description" content="web test">
  <meta name="go-import" content="github.com/wuzhongtao/web git https://github.com/wuzhongtao/web.git">

  <meta content="28773505" name="octolytics-dimension-user_id" /><meta content="wuzhongtao" name="octolytics-dimension-user_login" /><meta content="95898809" name="octolytics-dimension-repository_id" /><meta content="wuzhongtao/web" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="95898809" name="octolytics-dimension-repository_network_root_id" /><meta content="wuzhongtao/web" name="octolytics-dimension-repository_network_root_nwo" /><meta content="false" name="octolytics-dimension-repository_explore_github_marketplace_ci_cta_shown" />


    <link rel="canonical" href="https://github.com/wuzhongtao/web/blob/master/zigbee_networking_layer.md" data-pjax-transient>


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

  </head>

  <body class="logged-in env-production page-blob">
    

  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="bg-black text-white p-3 show-on-focus js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        
<header class="Header  f5" role="banner">
  <div class="d-flex px-3 flex-justify-between container-lg">
    <div class="d-flex flex-justify-between">
      <a class="header-logo-invertocat" href="https://github.com/" data-hotkey="g d" aria-label="Homepage" data-ga-click="Header, go to dashboard, icon:logo">
  <svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>


    </div>

    <div class="HeaderMenu d-flex flex-justify-between flex-auto">
      <div class="d-flex">
            <div class="">
              <div class="header-search scoped-search site-scoped-search js-site-search" role="search">
  <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/search" class="js-site-search-form" data-scoped-search-url="/wuzhongtao/web/search" data-unscoped-search-url="/search" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
    <label class="form-control header-search-wrapper js-chromeless-input-container">
        <a href="/wuzhongtao/web/blob/master/zigbee_networking_layer.md" class="header-search-scope no-underline">This repository</a>
      <input type="text"
        class="form-control header-search-input js-site-search-focus js-site-search-field is-clearable"
        data-hotkey="s"
        name="q"
        value=""
        placeholder="Search"
        aria-label="Search this repository"
        data-unscoped-placeholder="Search GitHub"
        data-scoped-placeholder="Search"
        autocapitalize="off">
        <input type="hidden" class="js-site-search-type-field" name="type" >
    </label>
</form></div>

            </div>

          <ul class="d-flex pl-2 flex-items-center text-bold list-style-none" role="navigation">
            <li>
              <a href="/pulls" aria-label="Pull requests you created" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:pulls context:user" data-hotkey="g p" data-selected-links="/pulls /pulls/assigned /pulls/mentioned /pulls">
                Pull requests
</a>            </li>
            <li>
              <a href="/issues" aria-label="Issues you created" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:issues context:user" data-hotkey="g i" data-selected-links="/issues /issues/assigned /issues/mentioned /issues">
                Issues
</a>            </li>
                <li>
                  <a href="/marketplace" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:marketplace context:user" data-selected-links=" /marketplace">
                    Marketplace
</a>                </li>
            <li>
              <a href="/explore" class="js-selected-navigation-item HeaderNavlink px-2" data-ga-click="Header, click, Nav menu - item:explore" data-selected-links="/explore /trending /trending/developers /integrations /integrations/feature/code /integrations/feature/collaborate /integrations/feature/ship showcases showcases_search showcases_landing /explore">
                Explore
</a>            </li>
          </ul>
      </div>

      <div class="d-flex">
        
<ul class="user-nav d-flex flex-items-center list-style-none" id="user-links">
  <li class="dropdown js-menu-container">
    <span class="d-inline-block  px-2">
      

    </span>
  </li>

  <li class="dropdown js-menu-container">
    <a class="HeaderNavlink tooltipped tooltipped-s js-menu-target d-flex px-2 flex-items-center" href="/new"
       aria-label="Create newâ¦"
       aria-expanded="false"
       aria-haspopup="true"
       data-ga-click="Header, create new, icon:add">
      <svg aria-hidden="true" class="octicon octicon-plus float-left" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 9H7v5H5V9H0V7h5V2h2v5h5z"/></svg>
      <span class="dropdown-caret mt-1"></span>
    </a>

    <div class="dropdown-menu-content js-menu-content">
      <ul class="dropdown-menu dropdown-menu-sw">
        
<a class="dropdown-item" href="/new" data-ga-click="Header, create new repository">
  New repository
</a>

  <a class="dropdown-item" href="/new/import" data-ga-click="Header, import a repository">
    Import repository
  </a>

<a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, create new gist">
  New gist
</a>

  <a class="dropdown-item" href="/organizations/new" data-ga-click="Header, create new organization">
    New organization
  </a>



  <div class="dropdown-divider"></div>
  <div class="dropdown-header">
    <span title="wuzhongtao/web">This repository</span>
  </div>
    <a class="dropdown-item" href="/wuzhongtao/web/issues/new" data-ga-click="Header, create new issue">
      New issue
    </a>

      </ul>
    </div>
  </li>

  <li class="dropdown js-menu-container">

    <details class="dropdown-details d-flex pl-2 flex-items-center">
      <summary class="HeaderNavlink name"
        aria-label="View profile and more"
        data-ga-click="Header, show menu, icon:avatar">
        <img alt="@wuzhongtao" class="avatar" src="https://avatars2.githubusercontent.com/u/28773505?v=4&amp;s=40" height="20" width="20">
        <span class="dropdown-caret"></span>
      </summary>

      <ul class="dropdown-menu dropdown-menu-sw">
        <li class="dropdown-header header-nav-current-user css-truncate">
          Signed in as <strong class="css-truncate-target">wuzhongtao</strong>
        </li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="/wuzhongtao" data-ga-click="Header, go to profile, text:your profile">
          Your profile
        </a></li>
        <li><a class="dropdown-item" href="/wuzhongtao?tab=stars" data-ga-click="Header, go to starred repos, text:your stars">
          Your stars
        </a></li>
          <li><a class="dropdown-item" href="https://gist.github.com/" data-ga-click="Header, your gists, text:your gists">Your Gists</a></li>

        <li class="dropdown-divider"></li>

        <li><a class="dropdown-item" href="https://help.github.com" data-ga-click="Header, go to help, text:help">
          Help
        </a></li>

        <li><a class="dropdown-item" href="/settings/profile" data-ga-click="Header, go to settings, icon:settings">
          Settings
        </a></li>

        <li><!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/logout" class="logout-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="lQpQRQwG9BY508KVLAAj+Vnutc1pkY1Kcc05jRO6uTcraFWznnbkWQIkKf9p4qMnGnejk/ueQCqmt7iZit4Fiw==" /></div>
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
        </form></li>
      </ul>
    </details>
  </li>
</ul>


        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/logout" class="sr-only right-0" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Ii+guru1gME4oU1Aj8y0PE+jfIDwvKdVPeVm9o67WYqcTaVMKcWQjgNWpirKLjTiDDpq3mKzajXqn+fiF9/lNg==" /></div>
          <button type="submit" class="dropdown-item dropdown-signout" data-ga-click="Header, sign out, icon:logout">
            Sign out
          </button>
</form>      </div>
    </div>
  </div>
</header>


      

  </div>

  <div id="start-of-content" class="show-on-focus"></div>

    <div id="js-flash-container">
</div>



  <div role="main">
        <div itemscope itemtype="http://schema.org/SoftwareSourceCode">
    <div id="js-repo-pjax-container" data-pjax-container>
      





    <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav">
      <div class="container repohead-details-container">

        <ul class="pagehead-actions">
  <li>
        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/notifications/subscribe" class="js-social-container" data-autosubmit="true" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="MK8piP+L3psVMK0M5kb7KqCHe7kc+n/TXhNzE0FC6ZE9tyVqUpDY5OZu1Ut7WSsXlmat1lm8H9P7WWMZTnlUhw==" /></div>      <input class="form-control" id="repository_id" name="repository_id" type="hidden" value="95898809" />

        <div class="select-menu js-menu-container js-select-menu">
          <a href="/wuzhongtao/web/subscription"
            class="btn btn-sm btn-with-count select-menu-button js-menu-target"
            role="button"
            aria-haspopup="true"
            aria-expanded="false"
            aria-label="Toggle repository notifications menu"
            data-ga-click="Repository, click Watch settings, action:blob#show">
            <span class="js-select-button">
                <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                Watch
            </span>
          </a>
            <a class="social-count js-social-count"
              href="/wuzhongtao/web/watchers"
              aria-label="0 users are watching this repository">
              0
            </a>

        <div class="select-menu-modal-holder">
          <div class="select-menu-modal subscription-menu-modal js-menu-content">
            <div class="select-menu-header js-navigation-enable" tabindex="-1">
              <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
              <span class="select-menu-title">Notifications</span>
            </div>

              <div class="select-menu-list js-navigation-container" role="menu">

                <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input checked="checked" id="do_included" name="do" type="radio" value="included" />
                    <span class="select-menu-item-heading">Not watching</span>
                    <span class="description">Be notified when participating or @mentioned.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                      Watch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input id="do_subscribed" name="do" type="radio" value="subscribed" />
                    <span class="select-menu-item-heading">Watching</span>
                    <span class="description">Be notified of all conversations.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-eye" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.06 2C3 2 0 8 0 8s3 6 8.06 6C13 14 16 8 16 8s-3-6-7.94-6zM8 12c-2.2 0-4-1.78-4-4 0-2.2 1.8-4 4-4 2.22 0 4 1.8 4 4 0 2.22-1.78 4-4 4zm2-4c0 1.11-.89 2-2 2-1.11 0-2-.89-2-2 0-1.11.89-2 2-2 1.11 0 2 .89 2 2z"/></svg>
                        Unwatch
                    </span>
                  </div>
                </div>

                <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
                  <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
                  <div class="select-menu-item-text">
                    <input id="do_ignore" name="do" type="radio" value="ignore" />
                    <span class="select-menu-item-heading">Ignoring</span>
                    <span class="description">Never be notified.</span>
                    <span class="js-select-button-text hidden-select-button-text">
                      <svg aria-hidden="true" class="octicon octicon-mute" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8 2.81v10.38c0 .67-.81 1-1.28.53L3 10H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h2l3.72-3.72C7.19 1.81 8 2.14 8 2.81zm7.53 3.22l-1.06-1.06-1.97 1.97-1.97-1.97-1.06 1.06L11.44 8 9.47 9.97l1.06 1.06 1.97-1.97 1.97 1.97 1.06-1.06L13.56 8l1.97-1.97z"/></svg>
                        Stop ignoring
                    </span>
                  </div>
                </div>

              </div>

            </div>
          </div>
        </div>
</form>
  </li>

  <li>
    
  <div class="js-toggler-container js-social-container starring-container ">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/unstar" class="starred" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="gZ/k73WPZ9QEnOkTYO4ESNbF6D9CEy7okewRfmAaeqLKQC8ZWAaEX/UwlEco6qJa567/2LmWxOC8S2dO9n8wzA==" /></div>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Unstar this repository" title="Unstar wuzhongtao/web"
        data-ga-click="Repository, click unstar button, action:blob#show; text:Unstar">
        <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
        Unstar
      </button>
        <a class="social-count js-social-count" href="/wuzhongtao/web/stargazers"
           aria-label="0 users starred this repository">
          0
        </a>
</form>
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/star" class="unstarred" data-remote="true" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="0ZRUNh7aVe+3U+P1GHw5J0JgKvbaDcr2CFSZQ7m1H36XrIu0FU8nKsulvHzNRtcTjoahe4oHvMkb1Tii1mR0sw==" /></div>
      <button
        type="submit"
        class="btn btn-sm btn-with-count js-toggler-target"
        aria-label="Star this repository" title="Star wuzhongtao/web"
        data-ga-click="Repository, click star button, action:blob#show; text:Star">
        <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
        Star
      </button>
        <a class="social-count js-social-count" href="/wuzhongtao/web/stargazers"
           aria-label="0 users starred this repository">
          0
        </a>
</form>  </div>

  </li>

  <li>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/fork" class="btn-with-count" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="vT1T/R4gkYybgdvJhbBGGtza6aRIvmj2rkjeDNrC+hcpP1sEUwBNqDAT0XaZu7b8sXhSjZLBAVYzLC7e2slOEg==" /></div>
            <button
                type="submit"
                class="btn btn-sm btn-with-count"
                data-ga-click="Repository, show fork modal, action:blob#show; text:Fork"
                title="Fork your own copy of wuzhongtao/web to your account"
                aria-label="Fork your own copy of wuzhongtao/web to your account">
              <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
              Fork
            </button>
</form>
    <a href="/wuzhongtao/web/network" class="social-count"
       aria-label="0 users forked this repository">
      0
    </a>
  </li>
</ul>

        <h1 class="public ">
  <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <span class="author" itemprop="author"><a href="/wuzhongtao" class="url fn" rel="author">wuzhongtao</a></span><!--
--><span class="path-divider">/</span><!--
--><strong itemprop="name"><a href="/wuzhongtao/web" data-pjax="#js-repo-pjax-container">web</a></strong>

</h1>

      </div>
      <div class="container">
        
<nav class="reponav js-repo-nav js-sidenav-container-pjax"
     itemscope
     itemtype="http://schema.org/BreadcrumbList"
     role="navigation"
     data-pjax="#js-repo-pjax-container">

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/wuzhongtao/web" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /wuzhongtao/web" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
      <span itemprop="name">Code</span>
      <meta itemprop="position" content="1">
</a>  </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/wuzhongtao/web/issues" class="js-selected-navigation-item reponav-item" data-hotkey="g i" data-selected-links="repo_issues repo_labels repo_milestones /wuzhongtao/web/issues" itemprop="url">
        <svg aria-hidden="true" class="octicon octicon-issue-opened" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"/></svg>
        <span itemprop="name">Issues</span>
        <span class="Counter">0</span>
        <meta itemprop="position" content="2">
</a>    </span>

  <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
    <a href="/wuzhongtao/web/pulls" class="js-selected-navigation-item reponav-item" data-hotkey="g p" data-selected-links="repo_pulls /wuzhongtao/web/pulls" itemprop="url">
      <svg aria-hidden="true" class="octicon octicon-git-pull-request" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 11.28V5c-.03-.78-.34-1.47-.94-2.06C9.46 2.35 8.78 2.03 8 2H7V0L4 3l3 3V4h1c.27.02.48.11.69.31.21.2.3.42.31.69v6.28A1.993 1.993 0 0 0 10 15a1.993 1.993 0 0 0 1-3.72zm-1 2.92c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zM4 3c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v6.56A1.993 1.993 0 0 0 2 15a1.993 1.993 0 0 0 1-3.72V4.72c.59-.34 1-.98 1-1.72zm-.8 10c0 .66-.55 1.2-1.2 1.2-.65 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      <span itemprop="name">Pull requests</span>
      <span class="Counter">0</span>
      <meta itemprop="position" content="3">
</a>  </span>

    <a href="/wuzhongtao/web/projects" class="js-selected-navigation-item reponav-item" data-selected-links="repo_projects new_repo_project repo_project /wuzhongtao/web/projects">
      <svg aria-hidden="true" class="octicon octicon-project" height="16" version="1.1" viewBox="0 0 15 16" width="15"><path fill-rule="evenodd" d="M10 12h3V2h-3v10zm-4-2h3V2H6v8zm-4 4h3V2H2v12zm-1 1h13V1H1v14zM14 0H1a1 1 0 0 0-1 1v14a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1V1a1 1 0 0 0-1-1z"/></svg>
      Projects
      <span class="Counter" >0</span>
</a>
    <a href="/wuzhongtao/web/wiki" class="js-selected-navigation-item reponav-item" data-hotkey="g w" data-selected-links="repo_wiki /wuzhongtao/web/wiki">
      <svg aria-hidden="true" class="octicon octicon-book" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M3 5h4v1H3V5zm0 3h4V7H3v1zm0 2h4V9H3v1zm11-5h-4v1h4V5zm0 2h-4v1h4V7zm0 2h-4v1h4V9zm2-6v9c0 .55-.45 1-1 1H9.5l-1 1-1-1H2c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h5.5l1 1 1-1H15c.55 0 1 .45 1 1zm-8 .5L7.5 3H2v9h6V3.5zm7-.5H9.5l-.5.5V12h6V3z"/></svg>
      Wiki
</a>
      <a href="/wuzhongtao/web/settings" class="js-selected-navigation-item reponav-item" data-selected-links="repo_settings repo_branch_settings hooks integration_installations /wuzhongtao/web/settings">
        <svg aria-hidden="true" class="octicon octicon-gear" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 8.77v-1.6l-1.94-.64-.45-1.09.88-1.84-1.13-1.13-1.81.91-1.09-.45-.69-1.92h-1.6l-.63 1.94-1.11.45-1.84-.88-1.13 1.13.91 1.81-.45 1.09L0 7.23v1.59l1.94.64.45 1.09-.88 1.84 1.13 1.13 1.81-.91 1.09.45.69 1.92h1.59l.63-1.94 1.11-.45 1.84.88 1.13-1.13-.92-1.81.47-1.09L14 8.75v.02zM7 11c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3z"/></svg>
        Settings
</a>
    <div class="reponav-dropdown js-menu-container">
      <button type="button" class="btn-link reponav-item reponav-dropdown js-menu-target " data-no-toggle aria-expanded="false" aria-haspopup="true">
        Insights
        <svg aria-hidden="true" class="octicon octicon-triangle-down v-align-middle text-gray" height="11" version="1.1" viewBox="0 0 12 16" width="8"><path fill-rule="evenodd" d="M0 5l6 6 6-6z"/></svg>
      </button>
      <div class="dropdown-menu-content js-menu-content">
        <div class="dropdown-menu dropdown-menu-sw">
            <a class="dropdown-item" href="/wuzhongtao/web/community" data-skip-pjax>
              <svg aria-hidden="true" class="octicon octicon-heart" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11.2 3c-.52-.63-1.25-.95-2.2-1-.97 0-1.69.42-2.2 1-.51.58-.78.92-.8 1-.02-.08-.28-.42-.8-1-.52-.58-1.17-1-2.2-1-.95.05-1.69.38-2.2 1-.52.61-.78 1.28-.8 2 0 .52.09 1.52.67 2.67C1.25 8.82 3.01 10.61 6 13c2.98-2.39 4.77-4.17 5.34-5.33C11.91 6.51 12 5.5 12 5c-.02-.72-.28-1.39-.8-2.02V3z"/></svg>
              <span itemprop="name">Community</span>
            </a>
          <a class="dropdown-item" href="/wuzhongtao/web/pulse" data-skip-pjax>
            <svg aria-hidden="true" class="octicon octicon-pulse" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M11.5 8L8.8 5.4 6.6 8.5 5.5 1.6 2.38 8H0v2h3.6l.9-1.8.9 5.4L9 8.5l1.6 1.5H14V8z"/></svg>
            Pulse
          </a>
          <a class="dropdown-item" href="/wuzhongtao/web/graphs" data-skip-pjax>
            <svg aria-hidden="true" class="octicon octicon-graph" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M16 14v1H0V0h1v14h15zM5 13H3V8h2v5zm4 0H7V3h2v10zm4 0h-2V6h2v7z"/></svg>
            Graphs
          </a>
        </div>
      </div>
    </div>
</nav>

      </div>
    </div>

<div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content">

    
  <a href="/wuzhongtao/web/blob/c1caf7c908887f4f311d8e03ea4de1702b0530f7/zigbee_networking_layer.md" class="d-none js-permalink-shortcut" data-hotkey="y">Permalink</a>

  <!-- blob contrib key: blob_contributors:v21:4eee2afbe9ac2e1e80cec9234b263726 -->

  <div class="file-navigation js-zeroclipboard-container">
    
<div class="select-menu branch-select-menu js-menu-container js-select-menu float-left">
  <button class=" btn btn-sm select-menu-button js-menu-target css-truncate" data-hotkey="w"
    
    type="button" aria-label="Switch branches or tags" aria-expanded="false" aria-haspopup="true">
      <i>Branch:</i>
      <span class="js-select-button css-truncate-target">master</span>
  </button>

  <div class="select-menu-modal-holder js-menu-content js-navigation-container" data-pjax>

    <div class="select-menu-modal">
      <div class="select-menu-header">
        <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
        <span class="select-menu-title">Switch branches/tags</span>
      </div>

      <div class="select-menu-filters">
        <div class="select-menu-text-filter">
          <input type="text" aria-label="Find or create a branchâ¦" id="context-commitish-filter-field" class="form-control js-filterable-field js-navigation-enable" placeholder="Find or create a branchâ¦">
        </div>
        <div class="select-menu-tabs">
          <ul>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="branches" data-filter-placeholder="Find or create a branchâ¦" class="js-select-menu-tab" role="tab">Branches</a>
            </li>
            <li class="select-menu-tab">
              <a href="#" data-tab-filter="tags" data-filter-placeholder="Find a tagâ¦" class="js-select-menu-tab" role="tab">Tags</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="branches" role="menu">

        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


            <a class="select-menu-item js-navigation-item js-navigation-open selected"
               href="/wuzhongtao/web/blob/master/zigbee_networking_layer.md"
               data-name="master"
               data-skip-pjax="true"
               rel="nofollow">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <span class="select-menu-item-text css-truncate-target js-select-menu-filter-text">
                master
              </span>
            </a>
        </div>

          <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/branches" class="js-create-branch select-menu-item select-menu-new-item-form js-navigation-item js-new-item-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="mYuGHCoY7oqiyOSdF+L2ZB4hZnSpg0H7tJVBw8UEyjgK/OD3mYvoV5pKfWQnXGDlbOs5pBG+lPS1j9VNetsTbg==" /></div>
          <svg aria-hidden="true" class="octicon octicon-git-branch select-menu-item-icon" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
            <div class="select-menu-item-text">
              <span class="select-menu-item-heading">Create branch: <span class="js-new-item-name"></span></span>
              <span class="description">from âmasterâ</span>
            </div>
            <input type="hidden" name="name" id="name" class="js-new-item-value">
            <input type="hidden" name="branch" id="branch" value="master">
            <input type="hidden" name="path" id="path" value="zigbee_networking_layer.md">
</form>
      </div>

      <div class="select-menu-list select-menu-tab-bucket js-select-menu-tab-bucket" data-tab-filter="tags">
        <div data-filterable-for="context-commitish-filter-field" data-filterable-type="substring">


        </div>

        <div class="select-menu-no-results">Nothing to show</div>
      </div>

    </div>
  </div>
</div>

    <div class="BtnGroup float-right">
      <a href="/wuzhongtao/web/find/master"
            class="js-pjax-capture-input btn btn-sm BtnGroup-item"
            data-pjax
            data-hotkey="t">
        Find file
      </a>
      <button aria-label="Copy file path to clipboard" class="js-zeroclipboard btn btn-sm BtnGroup-item tooltipped tooltipped-s" data-copied-hint="Copied!" type="button">Copy path</button>
    </div>
    <div class="breadcrumb js-zeroclipboard-target">
      <span class="repo-root js-repo-root"><span class="js-path-segment"><a href="/wuzhongtao/web"><span>web</span></a></span></span><span class="separator">/</span><strong class="final-path">zigbee_networking_layer.md</strong>
    </div>
  </div>


  
  <div class="commit-tease">
      <span class="float-right">
        <a class="commit-tease-sha" href="/wuzhongtao/web/commit/c1caf7c908887f4f311d8e03ea4de1702b0530f7" data-pjax>
          c1caf7c
        </a>
        <relative-time datetime="2017-08-31T14:47:49Z">Aug 31, 2017</relative-time>
      </span>
      <div>
        <img alt="@wuzhongtao" class="avatar" height="20" src="https://avatars2.githubusercontent.com/u/28773505?v=4&amp;s=40" width="20" />
        <a href="/wuzhongtao" class="user-mention" rel="author">wuzhongtao</a>
          <a href="/wuzhongtao/web/commit/c1caf7c908887f4f311d8e03ea4de1702b0530f7" class="message" data-pjax="true" title="update date tiem">update date tiem</a>
      </div>

    <div class="commit-tease-contributors">
      <button type="button" class="btn-link muted-link contributors-toggle" data-facebox="#blob_contributors_box">
        <strong>1</strong>
         contributor
      </button>
      
    </div>

    <div id="blob_contributors_box" style="display:none">
      <h2 class="facebox-header" data-facebox-id="facebox-header">Users who have contributed to this file</h2>
      <ul class="facebox-user-list" data-facebox-id="facebox-description">
          <li class="facebox-user-list-item">
            <img alt="@wuzhongtao" height="24" src="https://avatars0.githubusercontent.com/u/28773505?v=4&amp;s=48" width="24" />
            <a href="/wuzhongtao">wuzhongtao</a>
          </li>
      </ul>
    </div>
  </div>

  <div class="file">
    <div class="file-header">
  <div class="file-actions">

    <div class="BtnGroup">
      <a href="/wuzhongtao/web/raw/master/zigbee_networking_layer.md" class="btn btn-sm BtnGroup-item" id="raw-url">Raw</a>
        <a href="/wuzhongtao/web/blame/master/zigbee_networking_layer.md" class="btn btn-sm js-update-url-with-hash BtnGroup-item" data-hotkey="b">Blame</a>
      <a href="/wuzhongtao/web/commits/master/zigbee_networking_layer.md" class="btn btn-sm BtnGroup-item" rel="nofollow">History</a>
    </div>

        <a class="btn-octicon tooltipped tooltipped-nw"
           href="https://desktop.github.com"
           aria-label="Open this file in GitHub Desktop"
           data-ga-click="Repository, open with desktop, type:windows">
            <svg aria-hidden="true" class="octicon octicon-device-desktop" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M15 2H1c-.55 0-1 .45-1 1v9c0 .55.45 1 1 1h5.34c-.25.61-.86 1.39-2.34 2h8c-1.48-.61-2.09-1.39-2.34-2H15c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm0 9H1V3h14v8z"/></svg>
        </a>

        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/edit/master/zigbee_networking_layer.md" class="inline-form js-update-url-with-hash" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="Fy4KStQjt+R+PuMTE5BMGXaAJwCgGECon+mHrHRLQnJns+JpscwTBUr+YLl7biDOVdGtZqRomHfWV7ZCOFRZbg==" /></div>
          <button class="btn-octicon tooltipped tooltipped-nw" type="submit"
            aria-label="Edit this file" data-hotkey="e" data-disable-with>
            <svg aria-hidden="true" class="octicon octicon-pencil" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M0 12v3h3l8-8-3-3-8 8zm3 2H1v-2h1v1h1v1zm10.3-9.3L12 6 9 3l1.3-1.3a.996.996 0 0 1 1.41 0l1.59 1.59c.39.39.39 1.02 0 1.41z"/></svg>
          </button>
</form>        <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/wuzhongtao/web/delete/master/zigbee_networking_layer.md" class="inline-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="rwgansN+TCLSSDqRLWW+zTiUSUb6TCuwuwxd+b8FfjcOviR4Z+uJ58RVViOMV71bcy7wxccSC3KBeNz/gQZHTg==" /></div>
          <button class="btn-octicon btn-octicon-danger tooltipped tooltipped-nw" type="submit"
            aria-label="Delete this file" data-disable-with>
            <svg aria-hidden="true" class="octicon octicon-trashcan" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z"/></svg>
          </button>
</form>  </div>

  <div class="file-info">
      778 lines (604 sloc)
      <span class="file-info-divider"></span>
    68.1 KB
  </div>
</div>

    
  <div id="readme" class="readme blob instapaper_body">
    <article class="markdown-body entry-content" itemprop="text"><p>Title: ZigBee ç½ç»å±è¯¦è§£
Date: 2015-10-21 09:36
Modified: 2017-08-31 09:36
Slug: zigbee-networking-layer
Tags: zigbee
Authors: Joey Huang
Summary: ZigBee ç½ç»å±è¯¦è§£
Status: draft</p>
<h1><a id="user-content-zigbee-ç½ç»å±è¯¦è§£" class="anchor" href="#zigbee-ç½ç»å±è¯¦è§£" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZigBee ç½ç»å±è¯¦è§£</h1>
<p>[TOC]</p>
<h2><a id="user-content-zigbee-å-ieee-802154" class="anchor" href="#zigbee-å-ieee-802154" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZigBee å IEEE 802.15.4</h2>
<p>ZigBee å IEEE 802.15.4 ç»å¸¸è¢«æ··ç¨ï¼ä½å®éä¸ä»ä»¬æ¯å®å¨ä¸åçæ¦å¿µãIEEE 802.15.4 æ¯ç± <a href="http://www.ieee.org">IEEE</a> ç»ç»å¶å®åç»´æ¤çãå®å®ä¹äºå°åºåä½åèçæ çº¿éä¿¡ç<strong>ç©çå± (PHY)</strong> å**åªä½è®¿é®å± (MAC)**çè§èãIEEE 802.15.4 å®ä¹äºå¦ä¸çè§èï¼</p>
<ul>
<li>ç½ç»åç°æºå¶</li>
<li>ç»ç½åå å¥ç½ç»çæºå¶</li>
<li>æ¹åéä¿¡ä¿¡éçæºå¶</li>
<li>å¨ç¹å®ä¿¡éä¸æ£æµå¹²æ°ååªå£°çæºå¶</li>
<li><strong>éè¦ç¡®è®¤</strong>çï¼<strong>åè·³</strong>çæ°æ®åä¼ è¾æ¹æ³ãä½¿ç¨ CSMA-CA æ¥æ§å¶å²çªã</li>
<li><strong>ä¸éè¦ç¡®è®¤</strong>çï¼åè·³çæ°æ®åå¹¿æ­çæ¹æ³ã</li>
</ul>
<p>IEEE 802.15.4 æ²¡æå®ä¹<strong>å¤è·³ä¼ è¾</strong>ï¼<strong>å°ååé</strong>ï¼å<strong>åºç¨å±äºæä½</strong>åè®®ãå®éä¸ï¼æä¸äºå¶ä»çéä¿¡åè®®ä¹åºäº 802.15.4 æ¥å»ºç«ï¼å¦ 6LoWPANï¼Tiny O/S ç­ã</p>
<p>Zigbee æ¯å»ºç«å¨ 802.15.4 ä¸çæä¸»è¦çåè®®ä¹ä¸ï¼å®å¢å äºç½ç»å±æ¥æ¯æ<strong>ç¹å¯¹ç¹å¤è·³ç½ç¶ç½ç»</strong>ï¼å¢å äºå®å¨å±æ¥å¤ç<strong>ç½ç»å®å¨</strong>ï¼è¿å¢å äºåºç¨å±æ¥å®ç°<strong>åºç¨ç¨åºäºæä½</strong>ã</p>
<p><a href="https://camo.githubusercontent.com/035b1a3ac7a7f16e64abdc3ae92e4f42831a19dd/687474703a2f2f6d6f6f646c652e7574632e66722f66696c652e7068702f3439382f537570706f72745765622f7265732f7a69676265652d6172636869746563747572652e706e67" target="_blank"><img src="https://camo.githubusercontent.com/035b1a3ac7a7f16e64abdc3ae92e4f42831a19dd/687474703a2f2f6d6f6f646c652e7574632e66722f66696c652e7068702f3439382f537570706f72745765622f7265732f7a69676265652d6172636869746563747572652e706e67" alt="zigbee architecture" data-canonical-src="http://moodle.utc.fr/file.php/498/SupportWeb/res/zigbee-architecture.png" style="max-width:100%;"></a>
<em>ï¼å¾çæ¥èªç½ç»ï¼ä¾µå ï¼</em></p>
<ul>
<li>ç©çå± (PHY)ï¼è´è´£ææ°æ®éè¿ RF é¢è°±åéåºå»ï¼æèæ¥æ¶æ¥èª RF é¢è°±ä¸çæ°æ®ã</li>
<li>åªä½è®¿é®å± (MAC)ï¼è´è´£ç»ç½ï¼ä¿¡éå±äº«ï¼å¯é çåè·³æ°æ®ä¼ è¾ã</li>
</ul>
<p>PHY å MAC ä¹ä¸çæå¡å¨é¨ç± ZigBee æä¾ï¼åæ¬ç½ç»å±ï¼APSï¼ZDO åå®å¨å±ãZigBee æä¾ç½ç¶ç½ç»ï¼å¤è·³è½åï¼æ°æ®ä¼ è¾çå¯é æ§ï¼å¹¶ä¸æå®åºç¨ç¨åºäºæä½è§èã</p>
<p>Zigbee æ¯å¼æ­¥çéä¿¡æºå¶ï¼å®ä½¿ç¨ MAC å±æä¾ç CSMA-CA (Carrier-Sense Multiple-Access with collision avoidance) æ¥é¿åå²çªã</p>
<p>!!! notes "CSMA-CA åç"
CSMA-CA æºå¶æ¯ç± MAC å±æä¾çï¼ç¨æ¥é¿åå¤ä¸ªéä¿¡èç¹æ¶çå²çªãå®çå·¥ä½æºå¶ç±»ä¼¼å¼ä¼ï¼å½æä¸ä¸ªäººåè¨æ¶ï¼å¶ä»äººå¨å¬ãå½è¿ä¸ªäººè®²è¯è¿ç¨ä¸­æåäºä¸æ®µæ¶é´ï¼è¿ä¸ªæ¶åå¶ä»äººä¼è¯çå¼å§è®²è¯ãææ¶ï¼ä¼å¯¼è´ä¸¤ä¸ªäººåæ¶å¼å§è®²è¯ï¼è¿ä¸ªæ¶åè¿ä¸¤ä¸ªäººé½ä¼åä¸æ¥ï¼ç¶åè¿ä¸ä¸ªéæºçæ¶é´ååè¯çè®²è¯ãéè¦è®°ä½è¿ç¹ï¼å¨æ çº¿éä¿¡é¢åã<strong>å¨ä¸å®çéä¿¡èå´åï¼å¨æå®çä¿¡éä¸çä¸ä¸ªæå®çæ¶é´ç¹éåªè½æä¸æ¹å¨åéä¿¡å·</strong>ãåæ¶éè¦è®°ä½ï¼<strong>802.15.4 æ¯ååå·¥çéä¿¡æ¹å¼ï¼å³è¦ä¹å¨åéæ°æ®ï¼è¦ä¹å¨æ¥æ¶æ°æ®ï¼ä¸è½åæ¶åéåæ¥æ¶</strong>ã</p>
<p>å¦ä¸æ¹é¢ï¼ZigBee è¿å¯¹ 802.15.4 æ ååäºä¸å®ç¨åº¦çä¿®æ¹</p>
<ul>
<li>å®å¨æ§ï¼802.15.4 å®ä¹äºä¸ç§ç§°ä¸º CCM çå®å¨æºå¶ãç±äº ZigBee ä¸»è¦åºç¨å¨æ§è½è¾ä½çè¯çä¸ï¼ç±äºæ§è½æ¹é¢çåå ï¼ZigBee æ²¡æå®å¨éçº³ CCM å®å¨æºå¶ã</li>
<li>ä¿¡æ è¶æ¶æ¶é´ï¼ä¿¡æ  (beacon) æ¯åå«èç¹åç½ç»ä¿¡æ¯çä¸ä¸ªç®åçæ°æ®åï¼ZigBee ä½¿ç¨å®æ¥åç°ç½ç»ãç±äº ZigBee çç½ç»å¯è½å¾å¯éï¼æ¯å¦ 30 ä¸ªçè³æ´å¤çèç¹è®¾å¤å¨åä¸ä¸ªæ¥æ¶èå´åï¼è¿ä¸ªæ¶å 802.15.4 è§å®çä¿¡æ åºç­è¶æ¶æ¶é´æ ¹æ¬æ æ³æ»¡è¶³éæ±ï¼å ä¸ºè®¾å¤å¤ªå¤å¤ªå¯éäºï¼è®¾å¤æ ¹æ¬æ¥ä¸ååºç­ã</li>
<li>éä¿¡é¢çï¼<a href="http://standards.ieee.org/getieee802/download/802.15.4-2003.pdf">802.15.4-2003</a> å¨ PHY å±æä¾äº 1G Hz å 2.4 GHz çéä¿¡é¢çï¼868 MHz å 900 MHz çéä¿¡éçè¢«éå¶å¨ 20 kbpsï¼ä¸è¶è¿ 40 kbpsãè¿å¯¹ ZigBee æ¥è¯´éçå¤ªä½äºï¼æä»¥ ZigBee ä½¿ç¨ 2.4 GHz çéä¿¡é¢çï¼éçå¯è¾¾å° 250 kbpsã<a href="http://standards.ieee.org/getieee802/download/802.15.4-2006.pdf">802.15.4-2006</a> æåºäºå¦å¤ä¸ä¸ªä¼åç PHY å±ï¼è½å¨ 1 GHz ä»¥ä¸è¾¾å° 250 kbps çéä¿¡éçãç±äº 1 GHz ä»¥ä¸çé¢çç©¿éæ§æ¯ 2.4 GHz æ´å¥½ãæä»¥æªæ¥å¯è½è½çå° 1 GHz ä»¥ä¸éä¿¡é¢çç ZigBee è¯ççåºç°ãç®å ZigBee ä»ç¶ä½¿ç¨ 802.15.4-2003ï¼ä½å·²ç»å¼å§å¨è®¨è®ºåçº§å° 802.15.4-2006 ã</li>
</ul>
<h2><a id="user-content-ç»ç½åå¥ç½" class="anchor" href="#ç»ç½åå¥ç½" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç»ç½åå¥ç½</h2>
<p>ä¸ä¸ª ZigBee è®¾å¤åªæå å¥å°ä¸ä¸ªå·²ç»å­å¨çç½ç»æç»å»ºä¸ä¸ªæ°ç½ç»åï¼æè½éä¿¡ãåªæåè°å¨ (ZC - ZigBee Coordinator) æè½ç»å»ºç½ç»ï¼è·¯ç±å¨ (ZR - Router) å ç»ç«¯è®¾å¤ (ZED - End-Device) å¯ä»¥å å¥ç½ç»ã</p>
<p>æ¯ä¸ªè®¾å¤èç¹å¨çäº§æ¶é½ç±äº§åè®¾ç½®ä¸ä¸ªå¨çå¯ä¸ç 64 bit MAC å°åï¼ç§°ä¸ºé¿å°åï¼å¨å å¥ç½ç»åç±åè°å¨åæä¸ä¸ª 16 bit çç­å°åãå¨å®éç½ç»éè®¯æ¶ä½¿ç¨ç­å°åï¼ä»¥ä¾¿åå°åè®®è´è½½ï¼å¢å åºç¨å±è´è½½è½åã</p>
<h3><a id="user-content-ç»ç½" class="anchor" href="#ç»ç½" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç»ç½</h3>
<p>ç»ç½ç±åè°å¨æ¥æ§è¡ãç»ç½å®éä¸æ¯å®æä»¥ä¸ä¸¤ä¸ªä»»å¡ï¼</p>
<ul>
<li>å³å®å¯ä¸çç½ç»æ è¯ï¼ç§°ä¸º PAN ID</li>
<li>å¨ 802.15.4 è§å®ç 16 ä¸ªä¿¡éééæ©ä¸ä¸ªä¿¡éæ¥éä¿¡</li>
</ul>
<p>å®éä¸è¿ä¸¤ä¸ªä»»å¡é½æ¯ç±è¿è¡å¨åè°å¨ä¸çåºç¨ç¨åºå³å®çã<strong>åºç¨ç¨åºå³å®ä»ä¹æ¶åæ¥ç»ç½ï¼ä½¿ç¨åªä¸ªä¿¡éï¼ä½¿ç¨åªä¸ª PAN ID</strong> ãè¿è¡å¨åè°å¨ä¸çåºç¨ç¨åºå¯ä»¥æ¯å¤ç§å¤æ ·çï¼æ¯å¦è¿æ¥å°ä»¥å¤ªç½çç½å³ï¼ææ¸©å¨çè³æ¯ä¸ä¸ªç¯æ³¡ãåºç¨ç¨åºå¯ä»¥å³å®åè°å¨ä¸ä¸çµå°±ç»ç½æèç­å¾æä¸ªæé®æä¸åå¼å§ç»ç½ã</p>
<p><strong>åè°å¨çèè´£</strong></p>
<ul>
<li>ç»ç½</li>
<li>å¨ 802.15.4 ä¸å»ºç«éä¿¡ä¿¡é</li>
<li>å»ºç«ç½ç»ç PAN ID åæ©å± PAN ID</li>
<li>å³å®ä½¿ç¨åªç§åè®®æ ç±»å ï¼ç¼è¯æ¶å³å® æ è¿è¡æ¶å³å®ï¼</li>
<li>ä½ä¸ºç½ç»çå®å¨ä¸­å¿èç¹</li>
<li>ä½ä¸ºè®¾å¤å¥ç½çä»²è£ä¸­å¿ï¼å³æ¯å¦åè®¸è®¾å¤å¥ç½</li>
<li>æä¾ç½ç»éä¿¡çè·¯ç±åè½</li>
<li>å¦ææ ç¶è·¯ç±ä½¿è½ï¼å°ä½ä¸ºæ ç¶è·¯ç±çæ ¹èç¹</li>
</ul>
<p><strong>ç»ç½çæµç¨</strong></p>
<p><a href="/wuzhongtao/web/blob/master/images/zigbee_images-form-network.png" target="_blank"><img src="/wuzhongtao/web/raw/master/images/zigbee_images-form-network.png" alt="Form Network" style="max-width:100%;"></a></p>
<ul>
<li>åèµ·ç»ç½ï¼ç»ç½ä¸ç±åºç¨å±åèµ·ç</li>
<li>ä¿¡å·å¼ºåº¦æ«æï¼ZigBee ä¼è°ç¨ MAC çåè½æ¥æ«æä¿¡å·å¼ºåº¦ï¼ä»¥ä¾¿å³å®ä½¿ç¨åªä¸ªä¿¡éæ¥éä¿¡ãæ«ææ¶ï¼ä¼æ 16 ä¸ªä¿¡é (11â26)å¨é¨æ«æä¸éï¼æ¯ä¸ªä¿¡éæ«ææ¶é´å¤§æ¦æ¯ 0.5 ç§ï¼æ»å±éè¦è±è´¹ 8 ç§æ¶é´ã</li>
<li>æ´»å¨ç½ç»æ«æï¼ç±ä¸ä¸ªä¿¡æ è¯·æ± (Beacon Request) åå¤ä¸ªä¿¡æ åºç­ç»æï¼ç¨æ¥åç°é»è¿çç°æç½ç»ãæ´»å¨ç½ç»æ«æç¡®ä¿åç°é»è¿ç ZigBee ç½ç»ï¼ä¸ä½¿ç¨å·²ç»è¢«ä½¿ç¨äºç PAN ID æ¥ç»ç½ãæ´»å¨ç½ç»æ«æä¹éè¦è¶³å¤é¿çæ¶é´æ¥ç­å¾ç½ç»åºç­ã</li>
<li>åéçä¿¡éå PAN IDï¼ä»ä¹æ¯åéçä¿¡éå PAN ID ï¼ ZigBee åè®®æ çå®ç°å¾åäºéæ©æ²¡è¢«å ç¨çéä¿¡è´¨éæå¥½çä¿¡éãç½ç»æ è¯ PAN ID çé»è®¤å¼æ¯ 0xffffï¼æææ¯ç± ZigBee èªå¨éæ©ä¸ä¸ª PAN ID ï¼ä¸ä¸ªç®åçå®ç°æ¯ç´æ¥éå¢ï¼ç´å°æ¾å°ä¸ä¸ªæ²¡è¢«é»è¿çç½ç»ä½¿ç¨ç PAN ID ä¸ºæ­¢ï¼ï¼åºç¨ç¨åºä¹å¯ä»¥èªå·±è®¾ç½®ä¸ä¸ªä» 0x0000 å° 0x3fff çåºå®å¼æ¥ä½ä¸º PAN IDã<strong>å¼ºçå»ºè®®ä¸è¦è®¾ç½®æåºå®ç PAN ID</strong>ï¼èæ¯è®© ZigBee éæºéæ©ä¸ä¸ªï¼é¿åå²çªãå¦å¤ä¸ä¸ªé¿åå²çªçæ¹æ³æ¯å¯ç¨ ExtendedPANIDï¼å³ç´æ¥ç¨åè°å¨ç MAC å°åä½ä¸º PAN IDã</li>
</ul>
<h3><a id="user-content-å¥ç½" class="anchor" href="#å¥ç½" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¥ç½</h3>
<p>è·¯ç±å¨åç»ç«¯è®¾å¤ä¼æ§è¡å¥ç½æµç¨ãè·¯ç±å¨ä¸è¬ç±çµæºä¾çµï¼ç»ç«¯è®¾å¤ä¸è¬ç±çµæ± ä¾çµï¼æ­£å¸¸æ¶åè¿å¥ç¡ç ç¶æï¼åªå¨éè¦çæ¶åå¤éæ¥åé/æ¥æ¶æ°æ®ï¼æ¥çç»§ç»­è¿å¥ç¡ç ç¶æã</p>
<p><strong>è·¯ç±å¨çåè½</strong></p>
<ul>
<li>æ¥æ¾å¹¶å å¥æ­£ç¡®çç½ç»</li>
<li>å¨ç½ç»ä¸­è½¬åå¹¿æ­å</li>
<li>åä¸è·¯ç±ï¼åæ¬è·¯ç±åç°åè·¯ç±ä¿¡æ¯è¡¨ç»´æ¤</li>
<li>åè®¸å¶ä»è®¾å¤å å¥ç½ç» ï¼å¯éç½®ï¼</li>
<li>ä¸ºç¡ç çå­è®¾å¤ä¿å­æ°æ®å</li>
</ul>
<p><strong>ç»ç«¯è®¾å¤çåè½</strong></p>
<ul>
<li>æ¥æ¾å¹¶å å¥æ­£ç¡®çç½ç»</li>
<li>åç¶è®¾å¤è½®è¯¢ï¼ä»¥ä¾¿ç¡®è®¤å¨ç¡ç æé´æ¯å¦ææ°æ®ååéç»èªå·±</li>
<li>å½åç¶è®¾å¤è¿æ¥ä¸­æ­æ¶ï¼æ¥æ¾å¶ä»ç¶è®¾å¤æ¥å å¥ç½ç»</li>
<li>ç±åºç¨å±æ§å¶ï¼å¨å¤§é¨åæ¶é´è¿å¥ç¡ç ç¶æä»¥ä¾¿éä½åè</li>
</ul>
<p>å¥ç½çæµç¨å°±æ¯åç°é»è¿çç½ç»ï¼ç¶åéæ©ä¸ä¸ªå å¥çè¿ç¨ï¼ç±å¥ç½è®¾å¤åèµ·ãå¸åå°ï¼å¥ç½è®¾å¤åéä¿¡æ è¯·æ± (beacon request) ï¼ç¸å½äºå¤§å£°å°å« âHEYï¼éè¿æäººåï¼â é»è¿çåè°å¨æè·¯ç±å¨æ¶å°ä¿¡æ è¯·æ±åï¼ä¼åéåºç­ âHEYï¼æå¨è¿å¿ãâ</p>
<p>ä¿¡æ åºç­ç±åè°å¨æè·¯ç±å¨åéï¼ä»ä»¬ä¼å¨æ¶å°ä¿¡æ è¯·æ±çä¿¡éä¸åéä¿¡æ åºç­ï¼ä¸ä¸ªä¿¡æ è¯·æ±å¯è½ä¼å¯¹åºå¤ä¸ªä¿¡æ åºç­ãä¸ä¸ªä¿¡æ åºç­ä¼åå«ä¸äºç½ç»çåºæ¬ä¿¡æ¯ï¼PAN ID åæ©å± PAN IDï¼æ¯å¦åè®¸å¶ä»è®¾å¤å¥ç½ï¼æ¯å¦æç©ºé´æ¥ç»å¥ç½è®¾å¤å å¥ãä¿¡æ åºç­æ²¡æåå«ä»»ä½åºç¨å±çä¿¡æ¯ãæä»¥ï¼å¥ç½è®¾å¤éè¦åå å¥ç½ç»ï¼æ¥æ¾å¯¹åºçåºç¨ï¼å¦ææ¾ä¸å°ï¼å°±éç½ï¼ç»§ç»­å¿è¯å å¥å¶ä»ç½ç»ã</p>
<p>æ¥çä¸ä¸å¸åçä¿¡æ åºç­æ¥æ</p>
<pre lang="text"><code>Frame 3 (Length = 24 bytes)
IEEE 802.15.4
    Frame Control: 0x8000
        .... .... .... .000 = Frame Type: Beacon (0x0000)
        .... .... .... 0... = Security Enabled: Disabled
        .... .... ...0 .... = Frame Pending: No more data
        .... .... ..0. .... = Acknowledgement not required
        .... .... .0.. .... = Intra PAN: Not within the PAN
        .... ..00 0... .... = Reserved
        .... 00.. .... .... = Destination Address: not present
        ..00 .... .... .... = Reserved
        10.. .... .... .... = Source Address: 16-bit short address
    Sequence Number: 205
    Source PAN Identifier: 0x0bef
    Source Address: 0x0000
MAC Payload
    Superframe Specification: 0xcfff
        .... .... .... 1111 = Beacon Order (0x000f)
        .... .... 1111 .... = Superframe Order (0x000f)
        .... 1111 .... .... = Final CAP Slot (0x000f)
        ...0 .... .... .... = Battery Life Extension: Disabled
        ..0. .... .... .... = Reserved
        .1.. .... .... .... = PAN Coordinator: yes
        1... .... .... .... = Association Permit: enabled
    GTS Specification: 0x00
    Pending Address Specification: 0x00
Beacon Payload
Protocol ID: ZigBee NWK (0x00)
NWK Layer Information: 0x8421
    .... .... .... 0001 = Stack Profile (0x1)
    .... .... 0010 .... = nwkcProtocolVersion (0x2)
    .... ..00 .... .... = Reserved (0x0)
    .... .1.. .... .... = Router Capacity: True
    .000 0... .... .... = Device Depth (0x0)
    1... .... .... .... = End Device Capacity: True
    Extended PAN ID: 0x0050c211dc051801
</code></pre>
<p>ä»è¿ä¸ªä¿¡æ åºç­å¯ä»¥çå°ä¸äºä¿¡æ¯ï¼ZigBee stack profile æ¯ 0x01ï¼è¿æ¯ä¸ä¸ªåè°å¨èç¹ï¼ç®ååè®¸å¶ä»è®¾å¤å¥ç½ï¼ä¸è¶³å¤çç©ºé´ç»æ°è®¾å¤ï¼å®ç PAN ID æ¯ 0x0befï¼æ©å± PAN ID æ¯ 0x0050c211dc051801ã</p>
<ul>
<li>Frame Control: 0x8000: MAC å±ç Frame Control çå¼æ¯ 0x8000ï¼è¿æ¯ä¸ä¸ªä¿¡æ æ°æ®åã<strong>Security Enabled æ°¸è¿æ¯ 0ï¼è¿æ¯å ä¸º ZigBee ä½¿ç¨ç½ç»å±çå®å¨æºå¶ï¼èä¸ä½¿ç¨ MAC å±çå®å¨æºå¶</strong>ã</li>
<li>Source Address: 0x0000 è¡¨ç¤ºè¿æ¯ä¸ä¸ªåè°å¨ï¼å ä¸ºåè°å¨çç­å°åæ°¸è¿æ¯ 0x0000 ï¼å¦ææ¯å¶ä»çå¼ä»£è¡¨è¿æ¯è·¯ç±å¨ï¼ç»ç«¯è®¾å¤ä¸ä¼åéä¿¡æ åºç­ã</li>
<li>Association Permit: enabled: è¡¨ç¤ºè¿ä¸ªç½ç»åè®¸å¶ä»è®¾å¤å å¥</li>
<li>Beacon Order (0x000f)ï¼ZigBee æ¯ä¸ªå¼æ­¥ç½ç»ï¼å³ä¸æ¯æéæ¶éè¾¾åè½ãZigBee æ¯ä¸ªç± CSMA-CA æºå¶æ¥è§é¿å²çªçå¼æ­¥ç½ç»ã</li>
<li>End Device Capacity: Trueï¼æ¯å¦æç©ºé´å®¹çº³æ°è®¾å¤å¥ç½ã<strong>éå¯¹ stack profile 01 çè®¾å¤ï¼ä¸ä¸ªèç¹åè®¸å¶ä»è®¾å¤ä½ä¸ºå­èç¹å å¥ç½ç»çæ°ééå¶æ¯ 20ï¼å¶ä¸­ 6 ä¸ªè·¯ç±å¨ï¼14 ä¸ªç»ç«¯è®¾å¤</strong>ã</li>
</ul>
<p>!!! note "ZigBee stack profile"
ZigBee ä½¿ç¨ stack profile æ¥åºåä¸åçåè®®çæ¬å·ãStack Profile 01 è¡¨ç¤º ZigBee 2006, 2007 çæ¬çåè®®ãStack Profile 02 è¡¨ç¤º ZigBee Pro çåè®®çæ¬å·ãå³äºä¸¤ä¸ªåºå«ï¼è¯¦è§æ¬ææåçè¯¦ç»æè¿°ãå¦å¤éè¦æ³¨æå Applicatioin Profile çåºå«ï¼Application Profile æ¯ ZigBee èçå®ä¹çåºç¨å±åè®®ãæ¯å¦æºè½å®¶å±åéç ZigBee Profile ä¸º 0x0104ã</p>
<p>ZR å ZED å¥ç½æ¶ï¼å®éä¸æ¯éè¿éæ©ä¸ä¸ªèç¹ä½ä¸ºå¶ç¶èç¹æ¥å®æçãå¥ç½çè®¾å¤ç§°ä¸ºå­èç¹ï¼è¢«å³èçè®¾å¤ç§°ä¸ºç¶èç¹ãZC å ZR å¯ä»¥ä½ä¸ºç¶èç¹ï¼ZED åªè½ä½ä¸ºå­èç¹ãZR å¯ä»¥ä½ä¸ºå­èç¹ä¹å¯ä»¥ä½ä¸ºç¶èç¹ï¼è¦æ ¹æ®ç½ç»ææç»ææ¥å³å®ãéè¦ç¹å«æ³¨æï¼<strong>ç¶å­èç¹åç½ç¶ç½ç»æ²¡æä»»ä½å³ç³»ï¼ä»»ä½ä¸¤ä¸ªè·¯ç±å¨é½å¯ä»¥å¨ä¿¡å·è¦çèå´åè¿è¡ç¹å¯¹ç¹ç´æ¥éä¿¡</strong>ãå¦æä¸ä¸ªè·¯ç±å¨çç¶èç¹æå­èç¹ç¦»å¼ç½ç»ï¼å¨ç½ç»å¯åº¦è¶³å¤çæåµä¸ï¼å¯¹ç½ç»çè·¯ç±åéä¿¡æ²¡æä»»ä½å½±åãZR ä¸ä¼å¨ä¸åçç½ç»é´è·¯ç±ï¼åªä¼å¨ç¸åç PAN ID åä¿¡éä¸æ§è¡è·¯ç±åè½ã</p>
<p>éå¯¹ ZED æ¥è¯´ï¼ç¶å­èç¹å³ç³»å°±æ¯è¾ç¹æ®ãZED å¯ä»¥åç½ç»ä¸­çå¶ä»è®¾å¤éä¿¡ï¼ä½åªè½éè¿å¶ç¶èç¹ï¼å³ç¶èç¹æ¯ ZED å¯ä»¥<strong>ç´æ¥éä¿¡</strong>çå¯ä¸èç¹ãå½ ZED è¦åéæ°æ®æ¶ï¼å¶ç¶èç¹æ¯å¯ä¸ç<strong>ä¸ä¸è·³ (next hop) èç¹</strong>ãæä»¥ï¼å½ ZED åå¶ç¶èç¹çè¿æ¥ä¸­æ­æ¶ï¼å¿é¡»æ¥æ¾å¦å¤ç ZR æ ZC ä½ä¸ºå¶æ°çç¶èç¹ï¼ä»¥ä¾¿è½å¨ç½ç»ä¸­è¿è¡éä¿¡ãè¿ä¸ªè¿ç¨ç§°ä¸ºéæ°å¥ç½ (rejoin)ã</p>
<p><strong>å¥ç½æµç¨</strong></p>
<p><a href="/wuzhongtao/web/blob/master/images/zigbee_images-join-network.png" target="_blank"><img src="/wuzhongtao/web/raw/master/images/zigbee_images-join-network.png" alt="Join Network" style="max-width:100%;"></a></p>
<ul>
<li>æ´»å¨ç½ç»æ«æï¼è¿æ¯ä¸ºäºåç°é»è¿å¯ç¨ç ZigBee ç½ç»ãéè¿å¾æ¯ä¸ªä¿¡éåéä¿¡æ è¯·æ±æ¥åèµ·æ´»å¨ç½ç»æ«æï¼ç¶åç­å¾ä¿¡æ åºç­ãæ¯ä¸ªä¿¡éé»è®¤æ¯ 0.5 ç§çç­å¾åºç­æ¶é´ï¼è¿ä¸ªæ¶é´ä¹å¯ä»¥ç±åºç¨å±è®¾ç½®ãå½å¨é¨åºç­è¢«æ¶éèµ·æ¥åï¼ç±åºç¨å±éè¿éæ© PAN ID åä¿¡éï¼æ¥éæ©ä¸ä¸ªç½ç»å å¥ã</li>
<li>é´ææµç¨ï¼å½æ´»å¨ç½ç»æ«æå®æï¼å¹¶ä¸éæ©äºä¸ä¸ªåéçç½ç»æ¥å å¥ãæ¥ä¸æ¥å°±å¼å§é´ææµç¨ãéè¦æ³¨æï¼å½é´æå¼å§æ¶ï¼å¥ç½èç¹å·²ç»æäºç½ç»å°åï¼è³å°æ¯ä¸´æ¶å°åï¼ï¼é´æåªåçå¨å¯ç¨äºå®å¨çç½ç»ä¸­ãé´æç»å®å¨ä¸­å¿ï¼ä¸è¬æ¯åè°å¨å¼ä»»ï¼åè®¸ææç»å å¥ç½ç»çæéãå½é´ææ²¡ææåæ¶ï¼ç¶èç¹ä¼åè¯å¥ç½è®¾å¤ç¦»å¼ç½ç»ï¼å¹¶ä¸æ¶ååéç»å¥ç½è®¾å¤çå°åãä¸ä¸ªä¼ªè£çèç¹å¯è½ä¼æç½ç»å°åï¼ä½æ²¡ææ¶å°å®å¨ä¸­å¿åéçå¯é¥ï¼æä»¥æ æ³å¨ç½ç»ä¸­éä¿¡ã</li>
</ul>
<p>å¨ ZigBee Stack Profile 01 éï¼è®¾å¤èç¹é½<strong>å°½éå å¥å°é è¿æ æ ¹èç¹</strong> (Device Depth çå¼å°½éå°)ï¼è¿æ ·å¨æ å½¢ç»æéä¿¡çæ¶åï¼å¯ä»¥åå°æ°æ®åä¸­è½¬çæ¬¡æ°ã</p>
<p>ZigBee ç½ç»å»ºç«åï¼æä¹æ ·é»æ­¢æåè®¸å¶ä»è®¾å¤å å¥å¢ï¼ä¸ä¸ªæ¯ç¨å®å¨ä¸­å¿ (Trust Center) ç­ç¥ï¼å®å¨ä¸­å¿å¯ä»¥ç®åå°é»æ­¢å¶ä»æ°èç¹å å¥ç½ç»ãå¦å¤ä¸ä¸ªæ¹æ³æ¯ä½¿ç¨âåè®¸å å¥âæ¶é´çªãæ¯å¦åè®¸å å¥ç½ç»çæ å¿ä½åªå½±å ZC å ZR ãç½ç»å±éè¿åè¯­ NLME-PERMIT-JOINING.request è®¾ç½®æ¯å¦åè®¸è®¾å¤å å¥çæ å¿ä½ãZDP æä¾äºå¨ç½ç»ä¸­åéè¿ä¸ªåè¯­çæºå¶ï¼å¶åæ° 0xff è¡¨ç¤ºæå¼åè®¸è®¾å¤å¥ç½çæ å¿ï¼0x00 è¡¨ç¤ºå³é­åè®¸è®¾å¤å¥ç½æ å¿ï¼1 - 254 ä¹é´çå¼è¡¨ç¤ºå¨æå®ç§æ°ååè®¸è®¾å¤å å¥ã</p>
<pre><code>Seq     Time        SrcPAN      MACSrc      MACDst      Packet Type
                    DstPAN      MACDst (if 2 line)
-------------------------------------------------------------------------
1                               0xffff                  IEEE 802.15.4 Beacon Request
2       +02.780                 0xffff                  IEEE 802.15.4 Beacon Request
3       +00.003     0x0f00      0x0000                  IEEE 802.15.4 Beacon: AP: 0
4       +02.022     0xffff      00:50:c2:37:b0:04:00:02
                    0x0f00      0x0000                  Association Request
5       +00.001                                         Acknowledgment
6       +00.494                 00:50:c2:37:b0:04:00:02
                    0x0f00      0x0000                  Data Request
7       +00.001                                         Acknowledgment
8       +00.003                 00:50:c2:37:b0:04:00:01
                    0x0f00      00:50:c2:37:b0:04:00:02 Association Response
9       +00.001                                         Acknowledgment
10      +00.593                 0xffff                  IEEE 802.15.4 Beacon Request
11      +00.003     0x0f00      0x0001                  IEEE 802.15.4 Beacon: AP: 0
12      +00.006     0x0f00      0x0000                  IEEE 802.15.4 Beacon: AP: 0
13      +02.014     0xffff      00:50:c2:37:b0:04:00:03
                    0x0f00      0x0000                  Association Request
14      +00.001                                         Acknowledgment
15      +00.496                 00:50:c2:37:b0:04:00:03
                    0x0f00      0x0000                  Data Request
16      +00.001                                         Acknowledgment
17      +00.003                 00:50:c2:37:b0:04:00:01
                    0x0f00      00:50:c2:37:b0:04:00:03 Association Response
18      +00.001                                         Acknowledgment
</code></pre>
<p>è¿ä¸ªæ°æ®åéæä¸ä¸ªè®¾å¤ï¼ZC ç MAC å°åæ¯ 00:50:c2:37:b0:04:00:01ï¼ZR ç MAC å°åæ¯ 00:50:c2:37:b0:04:00:02ï¼ZED ç MACå°åæ¯ 00:50:c2:37:b0:04:00:03ã#1ï¼#2 å·æ°æ®åä¸º ZR å¥ç½è¯·æ±ååºæ¥çä¿¡æ è¯·æ±ã#3 å·æ°æ®åä¸º ZC ååºçä¿¡æ åºç­ï¼ZR å°±ç³è¯·æä¸º ZC çå­èç¹æ¥å å¥ç½ç»ã#4 å·æ°æ®åå°±æ¯ ZR åéç» ZC çå³èè¯·æ±ã#8 å·æ°æ®åä¸º ZC åéç» ZR çå³èåºç­ãæ¥çï¼#10 å·æ°æ®åæ¯ ZED åèµ·çå¥ç½æµç¨çä¿¡æ è¯·æ±ï¼è¿ä¸ªæ¶åæ¶å°äºä¸¤ä¸ªä¿¡æ åºç­ï¼åå«æ¯ #11 å #12 å·æ°æ®åï¼ä»ä»¬çç½ç»ç­å°ååå«æ¯ 0x0001 å 0x0000 å³ç½ç»ä¸­ç ZC åååå¥ç½ç ZR ã#13 å·æ°æ®åä¸º ZED åéçå³èè¯·æ±ï¼è¿éä»ç³è¯·æä¸º ZC çå­èç¹ãè¿æ ·å°±ç»æäºä¸ä¸ªä¸ä¸ªèç¹ç ZigBee ç½ç»ã</p>
<p>å½å¥ç½æååï¼åªè¦ç¥éå¯¹æ¹çç½ç»ç­å°åï¼ç½ç»ä¸­çèç¹å¯ä»¥ç´æ¥ç¸äºéä¿¡ï¼ä¸éè¦ç»å®ä¹ç±»çé¢å¤çæºå¶ãå½ç¶ï¼æ°æ®å¯ä»¥åéï¼åºç¨å±è½ä¸è½çå°è¿éè¦çåæ¹ç Application Profile æ¯å¦ä¸è´ã<strong>å¦æéè¦èªå®ä¹ Application Profile æ¶ (æ¯å¦ ZigBee èçæ²¡æå®ä¹çåºç¨åºæ¯)ï¼ä¸ä¸ªç®åå¯è¡çæ¹æ³æ¯ç½ç»ä¸­ææèç¹ä¸ªæç¸åçç«¯ç¹ (endpoint)ï¼ç¸æ¯ä¸ªç«¯ç¹é½æç¸åç Profile</strong>ã</p>
<h3><a id="user-content-éæ°å¥ç½" class="anchor" href="#éæ°å¥ç½" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>éæ°å¥ç½</h3>
<p>éæ°å¥ç½æ¯æä¸ä¸ª ZED å·²ç»å å¥è¿ç½ç»ï¼ZED èç¹å·²ç»æäº PAN IDï¼æ©å± PAN IDï¼å®å¨å¯é¥ï¼åç½ç»ç­å°åãä½ç±äºä»¥ä¸çåå éè¦éæ°å¥ç½ï¼</p>
<ul>
<li>ZED åå¶ç¶èç¹çéè®¯é¾è·¯ä¸¢å¤±äº</li>
<li>ZED è®¾å¤æçµéå¯</li>
</ul>
<p>å¨å®éç½ç»éè®¯æ¶ï¼ZED åä»çç¶èç¹ç´æ¥éè®¯ãå½ ZED åç°ç¶èç¹æ²¡æååºæ¶ï¼ZED å¿é¡»æ¥æ¾ä¸ä¸ªæ°çèç¹å½ä½ç¶èç¹ã<strong>ZED èªå·±å³å®ä»ä¹æ¶åå¤å®èªå·±æä¸ºå­¤ç¬èç¹</strong>ï¼èä¸æ¯å¶ç¶è®¾å¤å»å¤æ­ã<strong>ZigBee åè®®æ¬èº«æ²¡æè§å® ZED è¦è½®è¯¢å æ¬¡æè½ç¡®è®¤èªå·±æä¸ºå­¤å¿èç¹ï¼è¿ä¸ªæºå¶ç±åºç¨ç¨åºå³å®ã</strong></p>
<p>å¨ Freescale å¹³å°ï¼æä¸ªå¨å±å±æ§ gMaxFailureCounter_c å¯ä»¥è®¾ç½®ï¼é»è®¤æ¯ 2 ãå½ ZED åéæ°æ®è¿ç»­å¤±è´¥çæ¬¡æ°å°è¾¾è®¾ç½®çå¼æ¶ï¼ ZED å°±ä¼åèµ·éæ°å¥ç½æµç¨ã</p>
<p>éæ°å¥ç½æµç¨ç± ZED åèµ·ä¿¡æ è¯·æ±å¼å§ï¼éæ°å¥ç½åæ½å¨çç¶èç¹æ¯å¦åè®¸å¥ç½æ è®°æ å³ï¼åªåæ½å¨çç¶èç¹çå®¹çº³è½åæå³ï¼å³ä½¿æ½å¨çç¶è®¾å¤å³é­äºå¥ç½è®¸å¯ï¼åªè¦å®æç©ºé´å®¹çº³å­èç¹ï¼éæ°å¥ç½ä¾ç¶å¯ä»¥æåãå½ ZED æ¶å°ä¿¡æ åºç­åï¼å®éæ©ä¸ä¸ªåèªå·±æç¸å PAN ID çç½ç»å¥ç½ï¼å¹¶è·å¾æ°çç½ç»ç­å°åãæå ZED åå¸ä¸æ¡éç¥ï¼åè¯ç½ç»å®å·²ç»ç§»å¨äºï¼è¿æ ·ç½ç»ä¸­çå¶ä»èç¹å¯ä»¥æ´æ°è·¯ç±è¡¨ãåæ¶ä¿çè®¾å¤ç»å®ä¿¡æ¯ã</p>
<p>æ¯å¦åæ¥ç½ç»ä¸­æä¸ä¸ªè®¾å¤ï¼ä¸ä¸ª ZCï¼ZC ä¸æä¸¤ä¸ªå­èç¹ï¼ä¸ä¸ª ZR åæ¶ä¹æ¯ä¸ªå¼å³ï¼å¦å¤ä¸ä¸ªæ¯ ZED åæ¶ä¹æ¯ç¯ãZR å¼å³å ZED ç¯ç»å®èµ·æ¥äºï¼å³éè¿ ZR çå¼å³å¯ä»¥æ§å¶ ZED çç¯ãæä¸ªæ¶é´ç¹ï¼ZED å ZC è¿æ¥ä¸­æ­äºï¼è¿ä¸ªæ¶å ZED åèµ·éæ°å¥ç½æµç¨ï¼æç»åæ ZR å¼å³çå­èç¹ãæå ZED åå¸éç¥ï¼åè¯ç½ç»å®å·²ç»ç§»å¨äºï¼å¹¶ä¸éææ°çç½ç»ç­å°åãè¿æ · ZR å ZED ä¹é´çç»å®ä¿¡æ¯å°ä¼è¢«ä¿çä¸æ¥ï¼å³ ZR å¼å³ä¾ç¶å¯ä»¥æ§å¶ ZED ç¯è®¾å¤ã</p>
<pre><code>Seq     Time    SrcPAN      MACSrc      MACDst      Packet Type
                DstPAN      MACDst (if 2 line)
------------------------------------------------------------------------
STEP 4
4       +02.022 0xffff      00:50:c2:37:b0:04:00:02
                0x0f00      0x0000                  IEEE:Association Request
13      +02.014 0xffff      00:50:c2:37:b0:04:00:03
                0x0f00      0x0000                  IEEE:Association Request
STEP 5
25      +05.892 0x0f00      0x0001      0x0000      ZDP:EndDeviceBindReq
29      +00.766 0x0f00      0x796f      0x0f00      ZDP:EndDeviceBindReq
35      +00.094 0x0f00      0x0000      0x0001      ZDP:BindReq
STEP 7
67      +03.989 0x0f00      0x0001      0x0000      HA:On/off:Toggle
71      +00.004 0x0f00      0x0000      0x796f      HA:On/off:Toggle
STEP 8
119     +03.003                         0xffff      IEEE:Beacon Request
120     +00.002 0x0f00      0x0001                  IEEE:Beacon: AP: 0
125     +01.006 0x0f00      0x796f      0x0001      NWK:Rejoin Request
129     +00.003 0x0f00      0x0001      0x796f      NWK:Rejoin Response
STEP 9
131     +00.005 0x0f00      0x1430      0xffff      ZDP:EndDeviceAnnce (0x796f)
150     +05.004 0x0f00      0x0001      0x1430      HA:On/off:Toggle
</code></pre>
<p>è¿æ¯ä¸ä¸ªéæ°å¥ç½çæ°æ®åãSTEP 4ï¼ ä¸¤ä¸ªè®¾å¤å¥ç½æ¶é½æäº ZC çå­èç¹ãSTEP 5ï¼ ZC å ZED ç»å®èµ·æ¥ãSTEP 7ï¼ ZC æ§å¶å½ä»¤æ¥æ§å¶ ZED ï¼æ³¨æè¿éçæ°æ®ä¼ è¾ç»è¿äº ZCï¼å ä¸º ZED åªè½åä»çç¶èç¹ ZC ç´æ¥éä¿¡ï¼ZR è¦åæ°æ®æ¶åªè½åç» ZCï¼ç± ZC ååéç» ZEDãSTEP 8ï¼ZED åèµ·éæ°å¥ç½æµç¨ï¼#119 ä¸ºéæ°å¥ç½çä¿¡æ è¯·æ±ï¼#120 ZR (nwkAddr: 0x0001) ååä¸ä¸ªä¿¡æ åºç­ï¼è¿æ · ZED è¯·æ±ä½ä¸º ZR å­èç¹éæ°å¥ç½ãSTEP 9ï¼ZR åéå½ä»¤æ§å¶ ZED ç¯åï¼è¿ä¸ªæ¶åå½ä»¤å°±æ²¡æç»è¿ ZC è½¬åäºã</p>
<p><strong>æ çéæ°å¥ç½</strong></p>
<p>å¦å¤ä¸ç§éæ°å¥ç½æ¯æ çç (silent rejoin)ãå³å¨éæ°å¥ç½çè¿ç¨ä¸­ç½ç»ä¸­æ²¡æä»»ä½çæ°æ®åäº¤äºãæ¯å¦ä¸å¹¢å¤§æ¥¼æ 1000 ä¸ªèç¹ï¼å¤§æ¥¼çªç¶æ­çµäºï¼è¿äºä¸ä¼å¿ä¾çµæ¢å¤åææçè·¯ç±å¨éæ°å¼å§ï¼ç´æ¥ä» NVM éè¯»åä¹åçéç½®ä¿¡æ¯ï¼PAN IDï¼æ©å± PAN IDï¼ç½ç»ç­å°åï¼å®å¨å¯é¥ï¼ï¼å¯å¨å®æåå°±è£ä½ä»ä¹é½æ²¡åçãå ä¸ºå¦æè¿ä¸ªæ¶åéè¦åæ°æ®åå¥ç½æéæ°å¥ç½çè¯ï¼ä¼å¯¼è´ç½ç»æ¥å¡ã</p>
<p><strong>å·§ç¨éæ°å¥ç½</strong></p>
<p>æ³¨æå°æä¸ä¸ªç»èï¼éæ°å¥ç½åç½å³æåè°å¨æ¯å¦åè®¸è®¾å¤å¥ç½æ å³ï¼å³ä¸ç®¡ ZC/ZR æ¯å¦åè®¸å¥ç½ï¼åªè¦ä»æç©ºé´ï¼å°±åè®¸å¶ä»è®¾å¤ä»¥éæ°å¥ç½çå½¢å¼å å¥ç½ç»ãå©ç¨è¿ä¸ªæºå¶ï¼å¯ä»¥éè¿ç¼ç¨çæ¹å¼æç½ç»ç PAN IDï¼æ©å± PAN IDï¼å®å¨å¯é¥ç­ä¿¡æ¯åå¥ç­å¥ç½è®¾å¤ãç¶åè®¾å¤ä¸çµåä»¥éæ°å¥ç½çæµç¨æ¥ç³è¯·å å¥ç½ç»ã</p>
<p>è¿ä¸æºå¶ææ¶å¾æç¨ãæ¯å¦å¨æºè½å®¶å± (Home Automation) é¢åï¼è®¾å¤å¥ç½æ¶ï¼å®å¨ä¸­å¿å¨æåä¸æ­¥éè¦æå¯é¥åéç»æ°å¥ç½çè®¾å¤ãè¿æ´é²äºä¸ä¸ªæªè·å¯é¥çæ¶é´çªå£ãç±äºå¨è®¾å¤å¥ç½çæ¬¡æ°è¾å°ï¼ä¸æ¶é´ä¹å¾ç­ï¼æä»¥å¨æ­£å¸¸æåµä¸è¿ç§ç³»ç»é£é©çæ¶é´çªå£å¾ç­ï¼ä¹è¾å°åºç°ï¼è¿æ¯å¯ä»¥æ¥åçãä½å¦æå¯¹å®å¨æ§è¦æ±éå¸¸é«ãé£ä¹å°±å¯ä»¥ä½¿ç¨ç¼ç¨çæ¹å¼æ PAN IDï¼æ©å± PAN IDï¼å®å¨å¯é¥ç­ä¿¡æ¯åå¥è®¾å¤ï¼ç¶åè®¾å¤åèµ·éæ°å¥ç½æµç¨æ¥å¥ç½ï¼è¿æ ·å¯é¥å°±ä¸ä¼å¨ç½ç»ä¸­ä¼ è¾ï¼ç¡®ä¿äºæ´é«çå®å¨æ§ã</p>
<h2><a id="user-content-å°ååé" class="anchor" href="#å°ååé" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å°ååé</h2>
<p>ZigBee ä½¿ç¨ä¸¤ä¸ªå°åæ¥è¿è¡éä¿¡æ¶å¯»åï¼ä¸ä¸ªæ¯ 64 bit é¿å°å (IEEE or MAC Address)ï¼å¦å¤ä¸ä¸ªæ¯ 16 bit ç­å°å (NwkAddr)ãé¿å°åç±è®¾å¤çäº§ååå¥è®¾å¤ï¼å¹¶ä¸å¨è®¾å¤ççå½å¨æåä¸ä¼æ¹åãé¿å°åæ¯å¨çå¯ä¸çãå®éä¸ï¼64 bit çå°åç©ºé´è¶³å¤è®©å°çä¸æ¯å¹³æ¹ç±³æ¥æ 123,853 ä¸ªè®¾å¤ãé¿å°åç± IEEE åä¼æ§å¶ï¼è®¾å¤çäº§åå¯ä»¥å <a href="http://www.ieee.org">http://www.ieee.org</a> è´­ä¹°ãé¿å°åç±ä¸¤é¨åç»æï¼åé¢ 24 bit æ¯äº§åç  (OUI - Organizational Unique Identifier) ï¼åé¢ 40 bit ç±è®¾å¤çäº§åèªå·±ç®¡çã</p>
<p>ç­å°åç±è®¾å¤å¥ç½æ¶ç±åè°å¨åéï¼è®¾å¤ç¦»å¼ç½ç»æ¶ï¼åè°å¨ä¼åæ¶è¿ä¸ªå°åä¾ä¸ä¸ªå¥ç½è®¾å¤ä½¿ç¨ãæ¬èè®¨è®ºçå°ååéå°è®¨è®ºç­å°åçåéæµç¨ã</p>
<p>!!! note "ä¸ºä»ä¹éè¦ä¸¤å¥å°å"
å¨ ZigBee éä¿¡ä¸­ï¼NWK å±å MAC å±çåå¤´é½éè¦åå«æºå°ååç®çå°åãå³ä¸ä¸ªæ°æ®åéè¦æ 4 ä¸ªå°åãå¦æç¨é¿å°åæ¥å¯»åï¼åæ»å±éè¦ 32 ä¸ªå­èæ¥ä¿å­å°åãèå¦æç¨ç­å°åï¼åªéè¦ 8 ä¸ªå­èãè¿å°èç 24 ä¸ªå­èç»åºç¨å±ï¼æé«åè®®çæ°æ®è£è½½éã
ä¸ºä»ä¹ NWK å±å MAC å±é½éè¦ææºå°ååç®çå°åå¢ï¼è¿è·è·¯ç±æå³ãåè®¾æä¸ªæ°æ®åè¦ç»è¿å¤è·³ä» A èç¹åéå° Z èç¹ï¼NWK å±çæºå°ååç®çå°åå¨èç¹é´ä¼ è¾æ¶ä¿æä¸åï¼åå«æ¯ A çå°åå Z çå°åãè MAC å±çæºå°ååç®çå°åå°éçæ°æ®åå¨ä¸åèç¹é´åéèæ¹åï¼æ¯å¦ A åå° B æ¶ï¼MAC æºå°åæ¯ A çå°åï¼ç®çå°åæ¯ B çå°åï¼B è·³å° C æ¶ï¼æºå°åæ¯ B ï¼ç®çå°åæ¯ Cãè¿æ ·ä¸ç´å° Y è·³å° Z æ¶ï¼æºå°åæ¯ Y ï¼ç®çå°åæ¯ Zã</p>
<p>ZigBee æä¸¤å¥å°ååéæ¹æ¡ï¼</p>
<ul>
<li>CSkip : ç¨å¨ stack profile 0x01ï¼å³ ZigBeeãå°åç±ç¶å­èç¹å³ç³»æ¥åéï¼æç»ç½ç»å°åæä¸ä¸ª<strong>å¯¹ç§°æ </strong>ãå¶ä¸­æä¸ä¸ªå³é®ææ ç¨æ¥æ æ<strong>èç¹æ·±åº¦</strong>ï¼å³ä»æ ¹èç¹ (ZC) åéä¸ä¸ªæ°æ®åç»å­èç¹æ¶è¦ç»è¿å è·³æè½éè¾¾ã</li>
<li>Stochastic ï¼ ç¨å¨ stack profile 0x02ï¼å³ ZigBee Proãä¸ä¸ªèç¹å¥ç½æ¶ç±èç¹éæ©èªå·±çç­å°åï¼ç¶åéè¿å¹¿æ­åéä¸ä¸ªå¬åãä»¥ä¾¿æ£æ¥æ¯å¦æå°åå²çªï¼å¦æè¿ä¸ªå°åå·²ç»è¢«å ç¨ï¼åå¥ç½èç¹éæ©å¦å¤ä¸ä¸ªèç¹ï¼ç»§ç»­å¹¿æ­å¬åï¼ç´å°éæ©å°ä¸ä¸ªä¸å²çªçå°åä¸ºæ­¢ã</li>
</ul>
<p>å¨ CSkip ç®æ³éï¼åè°å¨ ZC è¢«å®ä¹ä¸ºæ ¹èç¹ï¼å¶ç­å°åä¸º 0x0000ï¼ä»»ä½ä¸ä¸ªå¥ç½è®¾å¤å°ä¼æ¶å°ä¸ä¸ªå¶ç¶èç¹çå³èåºç­ (Associate Response)ï¼è¿ä¸ªåºç­åéå°±åå«äºåéç»å¥ç½èç¹çç­å°åã</p>
<pre><code>IEEE 802.15.4
    Frame Control: 0xcc63
    Sequence Number: 53
    Destination PAN Identifier: 0x0bef
    Destination Address: 0x0050c2047800fc12
    Source Address: 0x0050c211dc051801
    MAC Payload
        Command Frame Identifier = Association Response: (0x02)
            Short Address: 0x0001
            Association Status: Association Successful (0x00)
</code></pre>
<p>è¿ä¸ªæ°æ®åå°±æ¯å³èåºç­æ°æ®åï¼å¶åéç»æ°å¥ç½å­è®¾å¤çç­å°åæ¯ 0x0001ï¼åæ¶çæä¸ä¸æºå°ååç®çå°åæ¯ 64 bit MAC å°åï¼è¿æ¯å ä¸ºç­å°åè¿æ²¡åéï¼æä»¥è¿ä¸ªéä¿¡å¿é¡»ç¨é¿å°åãä¸æ¦ç­å°ååéæååï¼å°±å¯ä»¥ä½¿ç¨ç­å°åäºã</p>
<p>CSkip ä½¿ç¨ä¸ä¸ªåæ°æ¥å³å®å°ååéï¼</p>
<ul>
<li>maxDepth: æå¤§æ·±åº¦ãåè°å¨æ¯æ æ ¹èç¹ï¼å¶æ·±åº¦ä¸º 0ï¼åè°å¨çå­èç¹çæ·±åº¦ä¸º 1ï¼åè°å¨çå­èç¹çå­èç¹çæ·±åº¦ä¸º 2ãä¾æ­¤ç±»æ¨ã</li>
<li>maxChildren: ä¸ä¸ªç¶èç¹æå¤å¯å®¹çº³çå­èç¹ä¸ªæ°ï¼åªæ ZC å ZR å¯ä»¥æ¥æå­èç¹ãå­èç¹å¯ä»¥æ¯ ZR æ ZEDã</li>
<li>maxRouters: ä¸ä¸ªç¶èç¹æå¤å¯å®¹çº³çè·¯ç±å¨å­èç¹ä¸ªæ°ã</li>
</ul>
<p>ZigBee stack profile 0x01 ä½¿ç¨ <strong>maxDepth=5, maxChildren=20, maxRouters=6</strong> è¿ç»åºå®å¼ãæäºè¿äºå¼ï¼å°±å¯ä»¥ä»æ°å­¦ä¸è®¡ç®åºæ°å¥ç½è®¾å¤çç­å°åï¼ä¹å¯ä»¥å¨è¿äºèç¹ä¹é´è·¯ç± (æºå°åï¼ç®çå°åï¼ä¸ä¸è·³å°å)ã</p>
<p>!!! note "çè§£ CSkip"
éå¯¹ stack profile 0x01 ç CSkip åæ°ãdepth = 0 çèç¹åªæ 1 ä¸ªï¼å³ ZCãdepth = 1 çèç¹æå¤æ 20 ä¸ªï¼å¶ä¸­æå¤åªè½æ 6 ä¸ªè·¯ç±å¨ãdepth = 2 çèç¹æå¤åªè½æ 120 (6 x 20) ä¸ªï¼å¶ä¸­æå¤åªè½æ 36 (6 x 6) ä¸ªè·¯ç±å¨ãdepth = 3 çèç¹æå¤åªè½æ 720 (36 x 20) ä¸ªï¼å¶ä¸­æå¤åªè½æ 216 (36 x 6) ä¸ªè·¯ç±å¨ãdepth = 4 çèç¹æå¤åªè½æ 4,320 (216 x 20) ä¸ªï¼å¶ä¸­æå¤åªè½æ 1,296 (216 x 6) ä¸ªè·¯ç±å¨ãdepth = 5 æ¯æåä¸å±ï¼å¶èç¹æå¤åªè½æ 25,920 (1296 x 20) ä¸ªï¼è¿ä¸å±åæ¾è·¯ç±å¨å·²ç»æ²¡ææä¹äºï¼å ä¸ºè¿ä¸å±çè·¯ç±å¨ä¸è½æå­èç¹ãè¿æ ·ç®ä¸æ¥ stack profle 01 ç CSkip åæ°éå¶çç½ç»è§æ¨¡ä¸º 31,101 (1 + 20 + 120 + 720 + 4320 + 25920) ä¸ªèç¹ãè¿ä¸ªæ°å­å°äº 16 bit ç­å°åå¯ç¨çæ»å°åæ°ã</p>
<p>æ ¹æ® stack profile 0x01 ç CSkip åæ°ï¼å¯ä»¥ç®åºæ¯å±èç¹ç CSkip å¸¸æ°ï¼</p>
<table>
<thead>
<tr>
<th>Cskip Level</th>
<th>Skip Number</th>
</tr>
</thead>
<tbody>
<tr>
<td>Cskip level 0</td>
<td>0x143d</td>
</tr>
<tr>
<td>Cskip level 1</td>
<td>0x035d</td>
</tr>
<tr>
<td>Cskip level 2</td>
<td>0x008d</td>
</tr>
<tr>
<td>Cskip level 3</td>
<td>0x0015</td>
</tr>
<tr>
<td>Cskip level 4</td>
<td>0x0001</td>
</tr>
<tr>
<td>Cskip level 5</td>
<td>0x0000</td>
</tr></tbody></table>
<p>ç»å®è¿äºå¸¸æ°ï¼ç¬¬ä¸ä¸ªä»¥ ZC ä½ä¸ºç¶èç¹å å¥ç½ç»ç ZR å°è·å¾ 0x0001 ç NwkAddrãç¬¬äºä¸ªä»¥ ZC ä½ä¸ºç¶èç¹å å¥ç½ç»ç ZR å°è·å¾ 0x143e (0x0001 + 0x143d) ç NwkAddrãè·³è¿ç 0x143d å°ä½ä¸ºå¶åé¢é£ä¸ªè·¯ç±å¨ä¸ææå­è®¾å¤çå°åç©ºé´ãç¬¬ä¸ä¸ªä»¥ ZC ä½ä¸ºç¶èç¹å å¥ç½ç»ç ZED çå°åå°æ¥å¨ææçè·¯ç±å¨ä¹åï¼å®çå°åç±ä¸é¢çå¬å¼ç®åºï¼</p>
<p>1 (ZC take 1 address) + 6 (maxRouter) * 0x143d (cstrip at level 0) = 0x796f</p>
<p>CSkip ç®æ³æ²¡æå¨ ZigBee Pro (stack profile 02) ä¸ä½¿ç¨ï¼ä¸»è¦æ¯å ä¸º CSkip å¨ç½ç»æ·±åº¦ (maxDepth) æ¹é¢çæ©å±è½åå¤ªå¼±äºãåå¦æä»¬æ³æç½ç»æ·±åº¦ä» 5 å±æ©å±å° 6 å±ï¼é£ä¹åæ°æ¯ maxDepth=6, maxChildren=20, maxRouters=6ï¼ç®åºæ¥çç½ç»æ»èç¹æ°å°æ¯ 186,621 ï¼è¿ä¸ªæ°å¼å°è¶åº 16 bit ç­å°åè½è¡¨è¾¾çèå´ã</p>
<p>è½ç¶<strong>å¥ç½åå°ååéæ¶ä»¥æ ç¶ä¸ºåºç¡ï¼ä½ ZigBee å¶å®æ¯ç½ç¶ç½ç» (mesh network)ï¼å³è·¯ç±æ¶æ¯ç½ç¶ç½ç»è·¯ç±ä¼å</strong>ï¼éå æ ç¶ç½ç»è·¯ç±è¾å©çç­ç¥ã</p>
<p>Stochastic å°ååéç­ç¥æ¯ ZigBee Pro (stack profile 02) ä¸å¼å¥å¹¶ä¸ä½¿ç¨çãè¿éå°±ä¸å±å¼ä»ç»ã</p>
<h2><a id="user-content-æ°æ®è·¯ç±" class="anchor" href="#æ°æ®è·¯ç±" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>æ°æ®è·¯ç±</h2>
<p>ZigBee ä½¿ç¨å¤ç§æ¹å¼æ¥å¯¹æ°æ®åè¿è¡è·¯ç±</p>
<ul>
<li>å¹¿æ­ï¼æ°æ®åä»ä¸ä¸ªèç¹å°å¤ä¸ªèç¹ãå¹¿æ­æºå¶å¯ä»¥è®©ä¸æ¬¡è¯·æ±å³å¯ææ°æ®ååéç»å¤ä¸ªèç¹ï¼å¹¿æ­æ¶æ¯æ¯æ²¡æç¡®è®¤ (acknowledged) çï¼å³<strong>å¹¿æ­åéèä¸ç¥éæ¥æ¶èæ¯å¦æ¶ä¸äºå¹¿æ­æ°æ®</strong>ãå¦å¤ï¼å¹¿æ­æ¶æ¯èµæºæ¶èæ¯è¾å¤ï¼å®éåºç¨æ¶å°½éå°ç¨å¹¿æ­æºå¶ã</li>
<li>ç½ç¶è·¯ç±ï¼åæ­åéï¼æ°æ®åä»ä¸ä¸ªèç¹å°å¦å¤ä¸ä¸ªèç¹ãè·¯ç±ä¿¡æ¯å»ºç«åï¼ç½ç¶è·¯ç±æ¯éå¸¸é«æçè·¯ç±åè®® (æ¶ææ§ï¼å¸¦å®½ï¼åå­å ç¨ç­)ãæ°æ®åéè¿ç½ç¶è·¯ç±åéæ¯ç»è¿ç¡®è®¤çï¼å³<strong>åéèç¥éæ¥æ¶èæ¯å¦æ¶å°æ°æ®å</strong>ãç½ç¶ç½ç»æ¯åå¸å¼çï¼è¿æ ·å°±å¯ä»¥å¤§å¹åå°ç©ºä¸­åçæ°éãç½ç¶è·¯ç±æå¤å¯ä»¥ä¼ è¾ 30 è·³ï¼å³ç»è¿ 30 ä¸ªèç¹æ¥ä¼ è¾æ°æ®ã</li>
<li>æ ç¶è·¯ç±ï¼åæ­åéï¼æ°æ®åä»ä¸ä¸ªèç¹å°å¦å¤ä¸ä¸ªèç¹ï¼åªå¨ stack profile 01 ä¸ä½¿ç¨ãæ ç¶è·¯ç±ä¹æ¯ç¡®è®¤çè·¯ç±æºå¶ãæ ç¶ç½ç»çå¸¦å®½æ§è½åç½ç¶ç½ç»ç¸å½ï¼ä½éè¦æ´å¤çåå­ã**æ ç¶è·¯ç±æå¤§çç¼ºç¹æ¯ï¼å½ç¶å­èç¹ä¹é´çè¿æ¥ä¸­æ­åï¼æ²¡ææ¢å¤æºå¶ã**æä»¥ ZigBee ä¼åä½¿ç¨ç½ç¶è·¯ç±ã</li>
<li>æºè·¯ç±ï¼åæ­åéï¼æ°æ®åä»ä¸ä¸ªèç¹å°å¦å¤ä¸ä¸ªèç¹ï¼åªå¨ stack profile 02 ä¸ä½¿ç¨ã<strong>æºè·¯ç±ä¸»è¦ç¨å¨ä¸ä¸ªä¸­å¿èç¹éè¦åæåä¸ä¸ä¸ªèç¹ç´æ¥éä¿¡æ¶ãç¸æ¯ç½ç¶è·¯ç±ï¼å®å¯ä»¥èçè·¯ç±è¡¨çç©ºé´</strong>ãå®æå¤§çç¼ºç¹æ¯åªè½æ¯æ 5 è·³ã</li>
</ul>
<p>åä¸ªè·¯ç±æ¹æ³çå¯¹æ¯è¡¨å¦ä¸ï¼</p>
<table>
<thead>
<tr>
<th>Routing Method</th>
<th>Broadcast</th>
<th>Mesh</th>
<th>Tree</th>
<th>Source Route</th>
</tr>
</thead>
<tbody>
<tr>
<td>Multi-hop</td>
<td>Up to 30</td>
<td>Up to 30</td>
<td>Up to 10</td>
<td>Up to 5 hops</td>
</tr>
<tr>
<td>Multiple destinations</td>
<td>Yes</td>
<td>No</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td>One-to-one</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Bandwidth efficient</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td>Payload efficient</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr>
<td>Acknowledged</td>
<td>No</td>
<td>Yes</td>
<td>Yes</td>
<td>Yes</td>
</tr></tbody></table>
<p>å¦å¤ä¸ä¸ªè·¯ç±æ¹æ³å¨ ZigBee è§èéæ²¡ææåï¼ä½å¾å¤ååé½æ¯æçï¼ç§°ä¸º<strong>é»è¿è·¯ç±</strong>ãå¦æä¸ä¸ªèç¹å¨é»è¿ (å¨æ çº¿ä¼ è¾è·ç¦»å)ï¼åéèç¹ç¥éç®çèç¹å°±å¨é»è¿ï¼é£ä¹æ°æ®ä¹å°ç´æ¥åéç»é»è¿çç®çèç¹ãè¿æ¯ä¸ç§å¾é«æçè·¯ç±æ¹æ³ã**åªæå½é»è¿èç¹æ¯è·¯ç±å¨æèå­èç¹ç»ç«¯è®¾å¤æ¶æèµ·ä½ç¨ã**å¦æé»è¿çç®çèç¹æ¯å¦å¤ä¸ä¸ªè·¯ç±å¨çå­èç¹ï¼é£ä¹å¿é¡»éè¿ç®çèç¹çè·¯ç±å¨è¿è¡è·¯ç±ã</p>
<p>è¿éåªæ¯å¯¹è·¯ç±åäºç®åçä»ç»ï¼ä¸é¢å°å¯¹æ¯ç§è·¯ç±æ¹æ³åè¯¦ç»çä»ç»ã</p>
<h3><a id="user-content-å¹¿æ­" class="anchor" href="#å¹¿æ­" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>å¹¿æ­</h3>
<p><a href="https://camo.githubusercontent.com/f0ba19bb2666135cb197cee22cff1f84925531ee/687474703a2f2f6d6173746572732e646f6e6e74752e6f72672f323031302f666b6e742f7a75622f646973732f62726f6164636173742e676966" target="_blank"><img src="https://camo.githubusercontent.com/f0ba19bb2666135cb197cee22cff1f84925531ee/687474703a2f2f6d6173746572732e646f6e6e74752e6f72672f323031302f666b6e742f7a75622f646973732f62726f6164636173742e676966" alt="broadcast" data-canonical-src="http://masters.donntu.org/2010/fknt/zub/diss/broadcast.gif" style="max-width:100%;"></a></p>
<p><em>å¾çæ¥èªç½ç»ï¼ä¾µå </em></p>
<p>è¿æ¯å¹¿æ­æ°æ®ä¼ è¾çç¤ºæå¾ãå¹¿æ­çä¼ è¾è±¡æ°´æ³¢ä¼ è¾ç±»ä¼¼ï¼å½ä¸ä¸ªèç¹åéä¸ä¸ªå¹¿æ­æ¶ï¼å¹¿æ­æ¶æ¯ä¼è¢«<strong>é»è¿</strong> (å¨æ çº¿ä¼ è¾è·ç¦»å) ç<strong>è·¯ç±å¨</strong>è½¬åã</p>
<p>å¹¿æ­æ¶æ¯æä¸ä¸ªéå¸¸éè¦çæ°æ®é¡¹ç§°ä¸º<strong>åå¾ (radius)</strong>ï¼åå¼ä¸º 0x01 - 0xff ãå½ä¸ä¸ªè·¯ç±å¨æ¶å°å¹¿æ­åæ¶ï¼ä¼è·å¾å¹¿æ­åç radius å­æ®µï¼å¹¶åå» 1ï¼å¦æè¿ä¸ªæ¶å radius è¿å¤§äº 0ï¼åä¼ç¨æ°ç radius å¼è½¬åè¿ä¸ªå¹¿æ­æ°æ®åã</p>
<p>æ¯ä¸ªèç¹é½ç»´æ¤ä¸ä¸ª<strong>å¹¿æ­ä¼ è¾è¡¨</strong>ï¼ç®ç§° <strong>BTT (Broadcast Transaction Table)</strong>ãBBT ä¸ä½è¢«ç¨æ¥è¿½è¸ªèç¹è½¬åçå¹¿æ­åï¼è¿ç¨æ¥é¿ååºç¨å±æ¶å°ä¸¤æ¬¡éå¤çå¹¿æ­åãå½èç¹æ¶å°å¹¿æ­åæ¶ï¼åæ£æ¥ radius &gt;= 0ï¼æ¡ä»¶æ»¡è¶³åï¼å¤æ­è¿ä¸ªå¹¿æ­æ¯å¦å·²ç»å¨ BTT éï¼å¦æå·²ç»å­å¨ï¼åç´æ¥ä¸¢å¼ï¼å¦æä¸å¨ï¼åå å¥ BBTï¼åæ¶æå¹¿æ­æ¶æ¯è½¬äº¤ç»åºç¨å±å¤çã</p>
<p>**BBT é»è®¤å¤§å°ä¸º 9ï¼å¹¿æ­å¨ç½ç»ä¸­çè¶æ¶æ¶é´ä¹æ¯ 9 ç§ãè¿æå³çç½ç»æå¤åªè½æ¯æ 1 ç§ä¸ä¸ªå¹¿æ­ã**å¦æ BBT æ»¡äºï¼æ°æ¶å°çå¹¿æ­å°è¢«ä¸¢å¼ã</p>
<p>å¦å¤ä¸ä¸ªç¹æ®çå¹¿æ­åå¾æ°å¼ä¸º 0ï¼å¦æå¹¿æ­åå¾ä¸º 0 è¡¨ç¤ºå¨æ´ä¸ª ZigBee ç½ç»ä¸­å¹¿æ­ãè¿æ¯ ZigBee åè®®è§å®çï¼ä½å¶å®è¿ä¸ªæ°å¼å¨åè®®åé¨ä¸è´æ§ä¸æäºé®é¢ï¼å ä¸ºåè®®å¾å¤å°æ¹é½ä½¿ç¨ 0xff ä½ä¸ºç¹æ®å¼ãæ¯å¦å¥ç½æ¶é´ä¸º 0xff è¡¨ç¤ºæ°¸è¿åè®¸å¥ç½ã</p>
<p><strong>ä¸ºä»ä¹ä¸æ¨èä½¿ç¨å¹¿æ­</strong></p>
<p>è·¯ç±åç°åè®®ä½¿ç¨å¹¿æ­ãä¸ªå« ZDP å½ä»¤ä¹ä½¿ç¨å¹¿æ­ä¼ è¾ï¼å¦å½è®¾å¤å¥ç½æ¶ ZDP-Device_annce å½ä»¤å°è¢«å¹¿æ­åéç»å¨ç½èç¹ãè¿æå³çèç¹å¥ç½æ¶ï¼å¯ä»¥æ¯é 2 ç§éè¯ä¸æ¬¡ãå¦æä¸ä¸å­è¦æ 100 ä¸ªèç¹å è¿ç½ç»ï¼åå¯è½éè¦å¤æ¬¡éè¯ãå ä¸ºæ°è®¾å¤å¥ç½æ¶åéçå¹¿æ­å¯è½ä¼å¯¼è´ç½ç»éä¿¡å¼å¸¸ã</p>
<p>å¦æä¸æ­å°æè·¯ç±åç°å¨æ§è¡ï¼æ­¤æ¶ç½ç»ä¸­å°âåæ»¡âå¹¿æ­ï¼è·¯ç±åç°åè®®æ°æ®åå°å¯è½è¢«ä¸¢å¼ï¼æç»å¯¼è´è·¯ç±åç°å¤±è´¥ãåºç¨å±å°ç¥éè·¯ç±åç°å¤±è´¥äºï¼æ­¤æ¶è¦ä¹æ¾å¼è·¯ç±åç°ï¼è¦ä¹å»¶æ¶å ç§åéè¯ã</p>
<p><strong>å¹¿æ­ç¤ºä¾</strong></p>
<pre><code>    Time        MACSrc  MACDst  NWKSrc  NWK Seq     R   NWKDst  Packet Type
---------------------------------------------------------------------------------------
31  +00.110     0x143e  0xffff  0x143e  12          5   0xffff  ZDP:EndDeviceAnnce
32  +00.022     0x0000  0xffff  0x143e  12          4   0xffff  ZDP:EndDeviceAnnce
33  +00.049     0x0001  0xffff  0x143e  12          3   0xffff  ZDP:EndDeviceAnnce
34  +00.090     0x143e  0xffff  0x143e  12          5   0xffff  ZDP:EndDeviceAnnce
35  +00.102     0x143e  0xffff  0x143e  12          5   0xffff  ZDP:EndDeviceAnnce
36  +00.030     0x0000  0xffff  0x143e  12          4   0xffff  ZDP:EndDeviceAnnce
37  +00.150     0x0001  0xffff  0x143e  12          3   0xffff  ZDP:EndDeviceAnnce
38  +00.013     0x0000  0xffff  0x143e  12          4   0xffff  ZDP:EndDeviceAnnce
</code></pre>
<p>å ä¸ªè¯´æï¼</p>
<ul>
<li>NWKSrc å NWK Seq å¯ä¸å°æ è¯äºä¸ä¸ªå¹¿æ­å</li>
<li>MACSrc å¨æ¯æ¬¡å¹¿æ­è¢«è½¬åçæ¶åæ¹åäºï¼ä»è¿ä¸ªå­æ®µå¯ä»¥çå°åªäºè®¾å¤å¨è½¬åå¹¿æ­åãè½¬åè¿ç¨ä¸­ï¼NWKSrc å NWK Seq ä¿æä¸å</li>
<li>R è¡¨ç¤ºå¹¿æ­åçåå¾ radius ãæ¯è½¬åä¸æ¬¡å¶å¼éå 1</li>
<li>ä» Time å¯ä»¥çå°ï¼æ¯ä¸ªè½¬åè®¾å¤é½ä¼éæºå»¶æ¶ä¸å°æ®µæ¶é´åè½¬åå¹¿æ­åï¼è¿ä¸ªæ¶é´ç§°ä¸º jitterãç±æ­¤å¯è§<strong>å¹¿æ­çä¼ è¾ä¼æ¯åæ­æ¢</strong>ãä¸è¬æåµä¸ï¼å¹¿æ­åä¼ è¾å° 10 è·³æéè¦çæ¶é´å¤§æ¦æ¯ 1000 msï¼è 10 è·³çåæ­ååªéè¦ 50-100 msã</li>
<li>åªæè·¯ç±å¨ (ZR and ZC) ä¼è½¬åå¹¿æ­åï¼ZED ä¼æ¶å°å¹¿æ­åï¼ä½ä¸ä¼è½¬åãZED ä¹ä¸ä¼ç´æ¥åèµ·å¹¿æ­ï¼å®ä¼ç¨åæ­åéç»ä»çç¶èç¹ï¼ç±ç¶èç¹ä»£æ¿ ZED æ¥åèµ·å¹¿æ­ã</li>
</ul>
<p><strong>å¹¿æ­æ¨¡å¼</strong></p>
<p>æä¸ç§å¹¿æ­æ¨¡å¼ï¼</p>
<ul>
<li>0xffff: å¹¿æ­ç»ç½ç»ä¸­çææèç¹ï¼åæ¬ç¡ç ç ZED èç¹</li>
<li>0xfffd: å¹¿æ­ç»ç½ç»ä¸­ææéç¡ç èç¹</li>
<li>0xfffc: å¹¿æ­ç»ç½ç»ä¸­ææçè·¯ç±å¨</li>
</ul>
<p>è¿ä¸ç§å¹¿æ­å¹¿æ­æ¨¡å¼å¨ ZDP å APS å±å½ä»¤ä¸­ä½¿ç¨ï¼åºç¨å±ä¹å¯ä»¥ç´æ¥è®¾ç½®ææä¸ªæ¨¡å¼æ¥ç´æ¥ä½¿ç¨ã</p>
<p>å½æå¹¿æ­çåå¾ radius è®¾ç½®ä¸º 1 æ¶ï¼æ°æ®ååªå¨å¹¿æ­èç¹çææé»è¿èç¹ä¹é´ä¼ è¾ãè¿æ¯ä¸ä¸ªå¾æç¨çæºå¶ã</p>
<h3><a id="user-content-ç½ç¶è·¯ç±" class="anchor" href="#ç½ç¶è·¯ç±" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç½ç¶è·¯ç±</h3>
<p>ç½ç¶è·¯ç±æ¯ ZigBee éä¿¡åè®®çæ ¸å¿åå®¹ãç½ç¶è·¯ç±æ¯ç®åä½å¼ºå¤§çæ¦å¿µãç½ç»ä¸­ä¸¤ä¸ªèç¹ä¹é´çè·¯ç±å°è¢«ä¸»å¨åç°ï¼å®å¯ä»¥è·¨è¶æå¤
30 ä¸ªä¸­é´èç¹ãå¦æè·¯ç±ä¸­é´æä¸ªèç¹åºäºé®é¢ï¼é æè·¯ç±ä¸­æ­ï¼é£ä¹æ°çè·¯ç±å°è¢«ä¸»å¨åç°ã</p>
<p>æ¬èåå®¹å°è¯¦ç»æè¿°è·¯ç±è¡¨ï¼è·¯ç±åç°è¿ç¨ï¼è·¯ç±éè¯¯åè·¯ç±ç»´æ¤ã</p>
<p><strong>ç½ç¶è·¯ç±çç¹ç¹</strong></p>
<ul>
<li>ä½¿ç¨ AODV (Advanced Ad-hoc On-Demand Distance Vectoring) ä½ä¸ºè·¯ç±ç®æ³ï¼è¿æ¯ä¸ªå¬å¼çèåçè·¯ç±ç®æ³ãZigBee å¯¹ç®æ³åäºæ¹è¿ï¼ä»¥éåºä½åå­çè®¾å¤è¦æ± (8 bit cpu, which only have 2K - 4K RAM)ã</li>
<li>ææçè·¯ç±æ¯ç«¯å¯¹ç«¯çãç½ç»ä¸­çææèç¹é½å¯ä»¥åç°è·¯ç±ï¼ç½ç»ä¸­çææè·¯ç±å¨é½å¯è½æ¯æ½å¨çè·¯ç±ãè¿ä¸è¿ç¨è¢«ç§°ä¸º<strong>è·¯ç±åç°</strong>ãå¨è·¯ç±åç°çè¿ç¨ä¸­ï¼ZigBee ä¿å­äºä¸ä¸ª<strong>è·¯ç±åç°è¡¨</strong> (æ³¨æå<strong>è·¯ç±è¡¨</strong>çåºå«) ç¨æ¥æ¾å°<strong>æ¶é´æé«æ</strong>çè·¯ç±ã</li>
<li>è·¯ç±æ¯åå¸å¼çãè·¯ç±ä¸­çæ¯ä¸ªèç¹é½ä¼å¨å¶<strong>è·¯ç±è¡¨</strong>éä¿å­ä¸ä¸ª<strong>å°è¾¾ä¸ä¸è·³</strong>çè·¯ç±ä¿¡æ¯ã</li>
<li>è·¯ç±æ¯ååçãéå¯¹ååéä¿¡ï¼å¿é¡»æç¸åºçç¬ç«çè·¯ç±åç°è¿ç¨ã</li>
<li>è·¯ç±è¡¨éçè·¯ç±ä¿¡æ¯ (å³ä¸ä¸è·³å°å) å°æç»­ä½¿ç¨ï¼ç´å°è·¯ç±å¤±è´¥ä¸ºæ­¢ã</li>
<li>è·¯ç±å¤±è´¥å°ä¼è¢«éç¥ç»æ°æ®ååéèç¹ï¼è¿æ ·åéèç¹å¯ä»¥åèµ·æ°çè·¯ç±åç°è¿ç¨ã</li>
</ul>
<p><strong>ä¸ºä»ä¹ ZigBee å°ç½ç¶è·¯ç±ä½ä¸ºå¶é¦éçæ ¸å¿è·¯ç±åè®®ï¼</strong></p>
<p>è½¬ååå¹¿æ­çå¸¦å®½ææ¬å¤ªé«ï¼å ä¸ºææçé»è¿èç¹é½ä¼è½¬åæ°æ®åï¼æä»¥èç¹å¨è½¬åä¹åï¼éè¦å»¶æ¶ä¸ä¸ªéæºçæ¶é´ï¼ä»¥é¿åå²çªãèç½ç¶è·¯ç±åªéè¦è·¯ç±ä¸çèç¹è½¬åæ°æ®åå³å¯ãè¿æ ·èçäºæ¶é´ä¹èçäºå¸¦å®½ãå¦å¤ï¼ç½ç¶è·¯ç±è¿æ¯<strong>éè·³ç¡®è®¤</strong>çï¼èè½¬ååå¹¿æ­ä¸æ¯ï¼è¿æ ·æé«äºç½ç»éä¿¡çå¯é æ§åå¸¦å®½ï¼å ä¸ºä¸éè¦å¯¹å·²ç»ç¡®è®¤ççæ¶æ¯è¿è¡è½¬åã</p>
<p>æºç«è·¯ç±éè¦äºåéç½® (æ¯å¦ TCP/IP) ï¼æä¸ªäººéè¦äºéç¥éç½ç»çä¸ä¸è·³ï¼ç¶åäºåéç½®å¥½ç½ç»ãè¿æ ·å¢å äºç½ç»éç½®ææ¬ãèä½¿ç¨ç½ç¶è·¯ç±ï¼ä¸éè¦äºåéç½®ï¼èç¹è®¾å¤å¯ä»¥éææ¾ç½®ãå½ç¶ï¼å¨ ZigBee Pro éä¹æä¾äºæºç«è·¯ç±çåè½ãæºç«è·¯ç±ç©ºä¸­åå¼æ¯æ¯è¾å¤§ï¼<strong>802.15.4 PHY å±åªæä¾ 127 å­èçåå¤§å°</strong>ï¼æ£é¤ ZigBee åè®®çè´è½½ï¼å®éæä¾ç»åºç¨å±çåªæå¤§æ¦ 100 å­èãå½ä½¿ç¨æºç«è·¯ç±æ¶ï¼å¯æä¾ç»åºç¨å±çå°±åªæå¤§æ¦ 80 å­èï¼çè³ 60 å­èãä¹æ­£æ¯å ä¸ºè¿ä¸ªåå ï¼ZigBee Pro æä¾çæºç«è·¯ç±æå¤åªæ¯æ 5 è·³ï¼å ä¸ºè·³æ°è¶å¤ï¼è½æä¾ç»åºç¨å±çæ°æ®è´è½½ç©ºé´è¶å°ã</p>
<h4><a id="user-content-è·¯ç±åç°" class="anchor" href="#è·¯ç±åç°" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è·¯ç±åç°</h4>
<p>è·¯ç±åç°ç±æä¸ªèç¹éè¿å¹¿æ­åèµ·ãå¨ç½ç»ä¸­ï¼æ¯ä¸ªé»è¿èç¹çéä¿¡é¾è·¯ææ¬ä¼å¨ PHY å±è¢«èªå¨æµéå¹¶ä¸è®°å½èµ·æ¥ï¼ç§°ä¸º<strong>è·¯å¾ææ¬</strong>ãè·¯å¾ææ¬å¨ 1 - 7 ä¹é´ï¼æ°å­è¶å¤§è¯´æéä¿¡è´¨éè¶å·®ãå¨è·¯ç±åç°è¿ç¨ä¸­ï¼æ¯æ¡è·¯ç±é½å°ç´¯å å¶å°è¾¾ç®çèç¹çæ¯ä¸è·³çè·¯å¾ææ¬ãZigBee éæ©è·¯å¾ææ¬æä½çé£æ¡è·¯ç±ä½ä¸ºæç»è·¯ç±ãéè¦æ³¨æçæ¯ï¼<strong>è·¯å¾ææ¬æä½å¹¶ä¸ç­åäºè·³æ°æå°</strong>ã</p>
<p>è·¯ç±åç°çç®çèç¹ä¼ç­å¾ä¸å®çæ¶é´æ¥å¤æ­åªä¸ªè·¯ç±çè·¯å¾ææ¬æä½ãå ä¸ºè·¯å¾ææ¬æä½çè·¯ç±ä¸ä¸å®ä¼ç¬¬ä¸ä¸ªå°è¾¾ï¼è¿æ¯å ä¸ºå¹¿æ­ä¼ è¾å¨æ¯ä¸ªèç¹é½ä¼æä¸ªéæºçå»¶æ¶ãå½è·¯ç±åç°çç®çèç¹éæ©äºä¸æ¡è·¯å¾ææ¬æä½çè·¯ç±åï¼å®ä¼ååèµ·è·¯ç±åç°çèç¹åéä¸ä¸ª<strong>åæ­çè·¯ç±åºç­</strong>ãç½ç»ä¸­çå¨è¿æ¡è·¯ç±ä¸çææä¸­é´èç¹æç§ååé¡ºåºè½¬åè¿æ¡è·¯ç±åºç­ï¼å¹¶ä¸æ´æ°èªå·±ç<strong>è·¯ç±è¡¨</strong>ä¿¡æ¯ãèå¶ä»çèç¹å¨<strong>è·¯ç±åç°è¡¨</strong>ä¸­ä¿å­äºè¿æ¡è·¯ç±åç°è¯·æ±å ç§çæ¶é´ï¼è¶è¿æ¶é´éå¶åï¼å°ä»è·¯ç±åç°è¡¨ä¸­æ¸é¤æã</p>
<p>è·¯ç±åç°åè®®åªè½å¨<strong>å°é¢å¯¹ç§°</strong>çç½ç»ä¸­èµ·ä½ç¨ãæ¯å¦ä¸ä¸ªèç¹åå°åçå¾å¤§ï¼ä½æ¥æ¶çµæåº¦å¾å°ï¼è¿æ ·å¶é»è¿èç¹è½æ¥æ¶å°è¿ä¸ªèç¹çä¿¡å·ï¼èå½é»è¿èç¹æ³åéæ°æ®ç»è¿ä¸ªèç¹æ¶ï¼è¿ä¸ªèç¹å´æ¶ä¸å°ãæä»¥ï¼å¨ç¡¬ä»¶è®¾è®¡å±é¢ï¼è¦ä¹ç¡®ä¿ææçèç¹é½éç½®äº PAï¼è¦ä¹ç¡®ä¿éç½®äº PA çèç¹åæ¶ä¹éç½®äºåç­çµæåº¦ç LNA (Low-Noise Amplifier)ã</p>
<p>å½è·¯ç±å»ºç«èµ·æ¥åï¼ææä»æºèç¹å°ç®çèç¹çæ°æ®åå°æ²¿çè¿æ¡è·¯ç±æ¥åéãæ­¤æ¶å³ä½¿è¿æ¡è·¯ç±çè·¯å¾ææ¬ä¸æ¯æä½çäºï¼åªè¦æ°æ®æ²¿çè¿æ¡è·¯ç±è½éè¾¾ï¼å°±ä¸ä¼éæ°åèµ·è·¯ç±åç°è¿ç¨ãé¤éè¿æ¡è·¯ç±ä¸å¯ç¨äºï¼æ°æ®åæ æ³éè¾¾ï¼è¿ä¸ªæ¶åæºèç¹æä¼ååèµ·ä¸æ¬¡è·¯ç±åç°è¿ç¨ãåºç¨å±å¯ä»¥æå¨åèµ·è·¯ç±åç°è¿ç¨ï¼è¿æ ·ç¡®ä¿è¦ä¼ éçæä¸ªæ°æ®åæ²¿çè·¯å¾ææ¬æä½çè·¯ç±ä¼ éãä½éè¦æ³¨æï¼è¿ç§è¡ä¸ºå°½éå°ç¨ï¼å ä¸ºè·¯ç±åç°è¿ç¨ç¨äºå¹¿æ­ï¼é¢ç¹ä½¿ç¨å¯è½å¯¼è´ç½ç»æ¥å¡ãå¦å¤ï¼è·¯ç±åç°è¿ç¨å¯è½æç»­ 1 - 2 ç§ï¼æ¶é´ææ¬ä¹æ¯è¾é«ã</p>
<p><a href="https://camo.githubusercontent.com/196cd586d3b4ea1d780ceb40bc58127ecd64d243/687474703a2f2f7777772e7266776972656c6573732d776f726c642e636f6d2f696d616765732f7a69676265655f6e6574776f726b2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/196cd586d3b4ea1d780ceb40bc58127ecd64d243/687474703a2f2f7777772e7266776972656c6573732d776f726c642e636f6d2f696d616765732f7a69676265655f6e6574776f726b2e6a7067" alt="route discovery" data-canonical-src="http://www.rfwireless-world.com/images/zigbee_network.jpg" style="max-width:100%;"></a></p>
<p><em>å¾çæ¥èªç½ç»ï¼ä¾µå </em></p>
<p>ä¸å¾æ¯ä¸ä¸ªå¸åç ZigBee ç½ç»ï¼å¯ä»¥å¨ä¸é¢æ¨¡æè·¯ç±åç°è¿ç¨ãä¹å¯ä»¥æ¼ç¤ºä¸ºä»ä¹è®¾å¤å¯åº¦å¤§æåççµæåº¦é«çç½ç»éä¿¡éåº¦è¾å¿«ã</p>
<h4><a id="user-content-è·¯ç±è¡¨" class="anchor" href="#è·¯ç±è¡¨" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>è·¯ç±è¡¨</h4>
<p>ç½ç»ä¸­çæ¯ä¸ªè·¯ç±å¨é½ä¿å­ä¸ä»½è·¯ç±è¡¨ï¼è·¯ç±è¡¨éåå«<strong>æç»å°åï¼ä¸ä¸æ­¥å°åï¼æ¯å¦ææçæ å¿ä½</strong>ãå¸åçè·¯ç±å¨çè·¯ç±è¡¨å¤§å°å¤§æ¦æ¯ 6 - 10 ä¸ªè®°å½ãä¸è¬æåµä¸ï¼è¿ä¸ªè·¯ç±è¡¨çå¤§å°è½æ»¡è¶³å¤§å¤æ°çç½ç»éæ±ï¼å ä¸ºè·¯ç±å¨ä¸è¬åªè·é»è¿çèç¹ä»¥ååè°å¨è¿è¡éä¿¡ã</p>
<p>å¦å¤ä¸ä¸ªéè¦æ³¨æçä¿¡æ¯æ¯ ZED ä¸åä¸è·¯ç±åç°è¿ç¨ï¼ä¹æ²¡æè·¯ç±è¡¨ãå¦ææä¸ªèç¹è¦æ¥æ¾å°è¾¾ ZED çè·¯ç±ï¼è¿ä¸ª ZED çç¶èç¹ä¼ä»¥è¿ä¸ª ZED çèº«ä»½æ¥åéè·¯ç±åç°çåºç­ãZED åªæ¥æ¶æ¥èªå¶ç¶èç¹çæ°æ®åï¼è¦åéæ°æ®åæ¶ï¼ç´æ¥åéç»å¶ç¶èç¹ã</p>
<p>æ­£æ¯ç±äº ZED çè¿ä¸ªç¹æ§ï¼æä»¥ ZC/ZR å¨ç»´æ¤èªå·±çè·¯ç±è¡¨æ¶ï¼éè¦å°å¿å°å¯¹å¾å¶å­è®¾å¤åè¡¨ãæ¯å¦ï¼<strong>ZC/ZR å¦æåç°å¶ ZED å­è®¾å¤è¶è¿ä¸æ®µæ¶é´æ²¡æåå¶ POLL æ°æ®ï¼é£ä¹å°±è®¤ä¸ºè¿ä¸ªå­è®¾å¤å·²ç»åæå«äººçå­è®¾å¤äºï¼éè¦ä»èªå·±çè·¯ç±è¡¨éæ¸é¤æ</strong>ï¼ä»¥é¿å ZC/ZR æä¸ä¸ªå·²ç»æ¢äºç¶è®¾å¤çå­è®¾å¤ä¾ç¶å½æèªå·±çå­è®¾å¤ãè¿æ ·ä¼å¯¼è´å¶æ°æ®æ æ³åéç»å­è®¾å¤ãåå æ¯ï¼æªåæ¶æ¸é¤å­è®¾å¤åè¡¨ç ZC/ZR ä¼è¯¯ä»¥ä¸ºé£ä¸ª ZED è¿æ¯èªå·±çå­è®¾å¤ï¼æä»¥ä¸ä¼ææ°æ®åéå°ç½ç»å»åç°æ°è·¯ç±ï¼èæ¯ç´æ¥ç­çå¶å­è®¾å¤éæ¥åæ¥ POLL æ°æ®ï¼ä½å®éä¸è¿ä¸ª ZED å­è®¾å¤å·²ç»æ¯å«äººçå­è®¾å¤äºã</p>
<p><strong>å½è·¯ç±è¡¨æ»¡äºä¹åä¼åçä»ä¹ï¼</strong></p>
<p>ZigBee åè®®æ²¡ææç¡®å°è§å®è·¯ç±è¡¨çç»´æ¤ç­ç¥ï¼è¿ä¸ç­ç¥ä¸è¬ç±è¯çååå®ç°ãæäºä½¿ç¨ LRU ç®æ³ï¼å³æè¿ä½¿ç¨æå°çä¼è¢«å é¤ãæäºç´æ¥ä¸å¤çï¼èæ¯è®©åºç¨å±å»å¤çã</p>
<p>å¨ä¸è¬å·¥ç¨å®è·µè¿ç¨ä¸­ï¼è·¯ç±åç°åªå¨è®¾å¤å®è£è°è¯çè¿ç¨ä¸­åçä¸æ¬¡ï¼ä¹åå°±ä¸ç´æ²¿ç¨è¿ä¸ªè·¯ç±ãç±äºæäºç¹æ®åå ï¼æ¯å¦ç§»å¨äºå®¶å·ï¼ææäºè®¾å¤æ­çµäºï¼å¯¼è´æä¸ªè·¯ç±ä¸å¯ç¨äºï¼æä¼ååèµ·è·¯ç±åç°è¿ç¨ã</p>
<h4><a id="user-content-ä¸ä¸ªæ°æ®åå®ä¾" class="anchor" href="#ä¸ä¸ªæ°æ®åå®ä¾" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ä¸ä¸ªæ°æ®åå®ä¾</h4>
<p>æåºæ¥çæ°æ®åçç½ç»ææç»æå¦ä¸å¾</p>
<p><a href="/wuzhongtao/web/blob/master/images/zigbee_route_discovery.png" target="_blank"><img src="/wuzhongtao/web/raw/master/images/zigbee_route_discovery.png" alt="zigbee route discovery" style="max-width:100%;"></a></p>
<p>å¶ä¸­ 0x0351 æ¯ä¸ªéçç ZED è®¾å¤ï¼å®æ¯ä¸ä¸ªå¼å³ã0x796f æ¯åè°å¨ä¸é¢çä¸ä¸ªå­è®¾å¤ï¼å®æ¯ä¸ä¸ªç¡ç è®¾å¤ï¼æ¯ä¸ä¸ªçµç¯ãæ¯ä¸ªè®¾å¤çç­å°åé½æ å¨äºå¶å³ä¾§ã</p>
<pre><code>Seq     Time            MACSrc  DstPAN  MACDst  MACSeq  NwkSrc  NwkDst  NwkSeq  Packet Type
---------------------------------------------------------------------------------------------------------------------
STEP 1: route discover from 0x0351 to 0x0000
56      + 00:00:00.315  0x0351  0x0f00  0x0002  151     0x0351  0x0000  181     Zigbee APS Data ZDP:EndDeviceBindReq
57      + 00:00:00.002                          151                             IEEE 802.15.4 Acknowledgment
58      + 00:00:00.006  0x0002  0x0f00  0xffff  69      0x0002  0xfffc  113     Zigbee NWK NWK Command: Route Request
59      + 00:00:00.069  0x0001  0x0f00  0xffff  48      0x0002  0xfffc  113     Zigbee NWK NWK Command: Route Request
60      + 00:00:00.005  0x0000  0x0f00  0x0001  100     0x0000  0x0001  133     Zigbee NWK NWK Command: Route Reply
61      + 00:00:00.001                          100                             IEEE 802.15.4 Acknowledgment
62      + 00:00:00.003  0x0001  0x0f00  0x0002  49      0x0001  0x0002  45      Zigbee NWK NWK Command: Route Reply
63      + 00:00:00.001                          49                              IEEE 802.15.4 Acknowledgment
64      + 00:00:00.005  0x0002  0x0f00  0x0001  70      0x0351  0x0000  114     Zigbee APS Data ZDP:EndDeviceBindReq
65      + 00:00:00.002                          70                              IEEE 802.15.4 Acknowledgment
66      + 00:00:00.004  0x0001  0x0f00  0x0000  50      0x0351  0x0000  46      Zigbee APS Data ZDP:EndDeviceBindReq
67      + 00:00:00.002                          50                              IEEE 802.15.4 Acknowledgment
68      + 00:00:00.013  0x0000  0x0f00  0xffff  101     0x0002  0xffc   113     Zigbee NWK NWK Command: Route Request
69      + 00:00:00.030  0x143e  0x0f00  0xffff  203     0x0002  0xfffc  113     Zigbee NWK NWK Command: Route Request

STEP 2: route discover from 0x0351 to 0x796f
146     + 00:00:01.248  0x0351  0x0f00  0x0002  155     0x0351  0x796f  185     Zigbee APS Data HA:On/off:Toggle
147     + 00:00:00.001                          155                             IEEE 802.15.4 Acknowledgment
148     + 00:00:00.005  0x0002  0x0f00  0xffff  80      0x0002  0xfffc  122     Zigbee NWK NWK Command: Route Request
149     + 00:00:00.036  0x143e  0x0f00  0xffff  211     0x0002  0xfffc  122     Zigbee NWK NWK Command: Route Request
150     + 00:00:00.006  0x0000  0x0f00  0x143e  109     0x0000  0x143e  140     Zigbee NWK NWK Command: Route Reply
151     + 00:00:00.001                          109                             IEEE 802.15.4 Acknowledgment
152     + 00:00:00.004  0x143e  0x0f00  0x0002  212     0x143e  0x0002  206     Zigbee NWK NWK Command: Route Reply
153     + 00:00:00.001                          212                             IEEE 802.15.4 Acknowledgment
154     + 00:00:00.003  0x0002  0x0f00  0x143e  81      0x0351  0x796f  123     Zigbee APS Data HA:On/off:Toggle
155     + 00:00:00.001                          81                              IEEE 802.15.4 Acknowledgment
156     + 00:00:00.005  0x143e  0x0f00  0x0000  213     0x0351  0x796f  207     Zigbee APS Data HA:On/off:Toggle
157     + 00:00:00.001                          213                             IEEE 802.15.4 Acknowledgment
158     + 00:00:00.010  0x0001  0x0f00  0xffff  57      0x0002  0xfffc  122     Zigbee NWK NWK Command: Route Request
159     + 00:00:00.005  0x0000  0x0f00  0xffff  111     0x0002  0xfffc  122     Zigbee NWK NWK Command: Route Request
160     + 00:00:01.742  0x796f  0x0f00  0x0000  54                              IEEE 802.15.4 Command: Data Request
161     + 00:00:00.001                          54                              IEEE 802.15.4 Acknowledgment
162     + 00:00:00.004  0x0000  0x0f00  0x796f  110     0x0351  0x796f  141     Zigbee APS Data HA:On/off:Toggle

STEP 3: power off router 0x143e, route discover again from 0x0351 to 0x796f
243     + 00:00:01.248  0x0351  0x0f00  0x0002  159     0x0351  0x796f  189     Zigbee APS Data HA:On/off:Toggle
244     + 00:00:00.001                          159                             IEEE 802.15.4 Acknowledgment
245     + 00:00:00.003  0x0002  0x0f00  0x143e  85      0x0351  0x796f  127     Zigbee APS Data HA:On/off:Toggle
246     + 00:00:00.005  0x0002  0x0f00  0xffff  86      0x0002  0xfffc  128     Zigbee NWK NWK Command: Route Request
247     + 00:00:00.039  0x0001  0x0f00  0xffff  58      0x0002  0xfffc  128     Zigbee NWK NWK Command: Route Request
248     + 00:00:00.005  0x0000  0x0f00  0x0001  114     0x0000  0x0001  144     Zigbee NWK NWK Command: Route Reply
249     + 00:00:00.001                          114                             IEEE 802.15.4 Acknowledgment
250     + 00:00:00.002  0x0001  0x0f00  0x0002  59      0x0001  0x0002  49      Zigbee NWK NWK Command: Route Reply
251     + 00:00:00.001                          59                              IEEE 802.15.4 Acknowledgment
252     + 00:00:00.028  0x0000  0x0f00  0xffff  115     0x0002  0xfffc  128     Zigbee NWK NWK Command: Route Request
253     + 00:00:00.262  0x0000  0x0f00  0xffff  116     0x0002  0xfffc  128     Zigbee NWK NWK Command: Route Request
254     + 00:00:00.261  0x0000  0x0f00  0xffff  117     0x0002  0xfffc  128     Zigbee NWK NWK Command: Route Request
255     + 00:00:01.087  0x796f  0x0f00  0x0000  82                              IEEE 802.15.4 Command: Data Request
256     + 00:00:00.001                          82                              IEEE 802.15.4 Acknowledgment
257     + 00:00:02.654  0x0351  0x0f00  0x0002  160     0x0351  0x796f  190     Zigbee APS Data HA:On/off:Toggle
258     + 00:00:00.001                          160                             IEEE 802.15.4 Acknowledgment
259     + 00:00:00.004  0x0002  0x0f00  0x0001  87      0x0351  0x796f  129     Zigbee APS Data HA:On/off:Toggle
260     + 00:00:00.001                          87                              IEEE 802.15.4 Acknowledgment
261     + 00:00:00.004  0x0001  0x0f00  0x0000  60      0x0351  0x796f  50      Zigbee APS Data HA:On/off:Toggle
262     + 00:00:00.001                          60                              IEEE 802.15.4 Acknowledgment
263     + 00:00:00.406  0x796f  0x0f00  0x0000  83                              IEEE 802.15.4 Command: Data Request
264     + 00:00:00.001                          83                              IEEE 802.15.4 Acknowledgment
265     + 00:00:00.003  0x0000  0x0f00  0x796f  118     0x0351  0x796f  145     Zigbee APS Data HA:On/off:Toggle
</code></pre>
<p>ä¸äºè¯´æï¼</p>
<ul>
<li>56#: 0x0351 èç¹è¦åéä¸ä¸ª ZDP:EndDeviceBindReq ç» 0x0000 èç¹ï¼å³åéç»åè°å¨ï¼ç±äº 0x0351 æ¯ä¸ª ZED è®¾å¤ï¼ä»ç´æ¥ææ°æ®ååéç»å¶ç¶èç¹ 0x0002ã</li>
<li>57#ï¼IEEE 802.15.4 MAC å±çä¸ä¸ªç¡®è®¤åï¼è¿æ · ZED 0x0351 å°±ç¥éä»çç¶èç¹ 0x0002 æ¶å°äºè¿ä¸ªæ°æ®å</li>
<li>58#: 0x0002 åç°ä»æ²¡æå°è¾¾ç®çèç¹ 0x0000 çè·¯ç±ä¿¡æ¯ï¼æä»¥åèµ·äºä¸ä¸ªè·¯ç±åç°è¿ç¨ï¼æ³¨æå°è¿éç NwkDst æ¯ 0xfffcï¼è¿ä¸ªå­æ®µæ¯è·¯ç±æ¨¡å¼ï¼è¡¨ç¤ºå¹¿æ­ç»ç½ç»ä¸­çææè·¯ç±å¨</li>
<li>59#: 0x0001 çè·¯ç±å¨æ¶å°è·¯ç±åç°è¯·æ±ååï¼è½¬åäºè¿ä¸ªå¹¿æ­å</li>
<li>60#ï¼0x0000 çåè°å¨æ¶å°è·¯ç±åç°è¯·æ±ååï¼åç°è¿ä¸ªè·¯ç±åç°çç®çå°åæ¯ç»ä»èªå·±çï¼ä»å°±åéäºä¸ä¸ªè·¯ç±åºç­åï¼è¿ä¸ªåºç­åç NwkDst æ¯ 0x0001ã</li>
<li>61#: 0x0001 åéäºä¸ä¸ªç¡®è®¤åç» 0x0000ï¼è¡¨ç¤ºä»æ¶å°äºè·¯ç±åç°åºç­å</li>
<li>62#: 0x0001 æ´æ°å®ä»çè·¯ç±è¡¨åï¼è½¬åäºè¿æ¡è·¯ç±åºç­åç» 0x0002ãçæè¿ä¸ªæ°æ®åéç NwkSrc å NwkDst å­æ®µã</li>
<li>63#ï¼0x0002 åéäºä¸ä¸ªç¡®è®¤åç» 0x0001ï¼è¡¨ç¤ºä»æ¶å°äºè·¯ç±åç°åºç­å</li>
<li>64#: è¿ä¸ªæ¶åï¼0x0351 å°è¾¾åè°å¨ 0x0000 çè·¯ç±ä¿¡æ¯å·²ç»å»ºç«èµ·æ¥äºï¼å®æ¯ 0x0351 -&gt; 0x0002 -&gt; 0x0001 -&gt; 0x0000ã0x0002 å¼å§åé ZDP:EndDeviceBindReq å½ä»¤ï¼çæè¿ä¸ªæ°æ®åéç NwkSrc = 0x0351ï¼å³è¿ä¸ªåæ¯ 0x0002 çå­è®¾å¤ ZED åéçï¼NwkDst = 0x0000 è¡¨ç¤ºè¿ä¸ªæ°æ®åæç»è¦åç»åè°å¨ãèè¿ä¸ªæ°æ®åç MACSrc = 0x0002ï¼MACDst = 0x0001ï¼è¡¨ç¤º 0x0002 åªææ°æ®ååéç»å®çä¸ä¸è·³ 0x0001ãä¸ä¸è·³çå°åå°±æ¯ç±è·¯ç±åç°è¿ç¨ä¸­åç°çã</li>
<li>66#ï¼0x0001 èç¹è½¬åäºè¿ä¸ªæ°æ®åç» 0x0000ã</li>
<li>68#-69#: è¿ä¸¤æ°æ®åæ¯è¾æææï¼å®å®éä¸è½¬åäºè·¯ç±åç°è¯·æ±çå¹¿æ­åãä½æ­¤æ¶è¿ä¸ªæ°æ®åå·²ç»æ²¡ææä¹äºï¼å ä¸ºè·¯ç±åç°å·²ç»ç»æäºï¼ç½ç»ä¸­å·²ç»ä½¿ç¨äºåç°çè·¯ç±æ¥éä¿¡äºã</li>
<li>STEP 2: 146# 0x0351 è¦åæ°æ®åç» 0x796fã148# 0x0351 çç¶èç¹ 0x0002 åç°å®æ²¡æå°è¾¾ 0x796f çè·¯ç±ï¼å°±åèµ·äºè·¯ç±åç°è¿ç¨ã150# 152# æ¯è·¯ç±åç°åºç­ï¼0x796f æ¯ 0x0000 çå­èç¹ï¼æä»¥ 0x0000 ä»£æ¿ 0x796f ä½äºåºç­ï¼è¿æ¬¡æä»¬åç°çè·¯ç±æ¯ 0x0351 -&gt; 0x0002 -&gt; 0x143e -&gt; 0x0000 -&gt; 0x796fã</li>
<li>154#: è·¯ç±åç°å®æåï¼0x0351 çç¶èç¹ 0x0002 èªå¨æå¨ #146 å¤çæ°æ®ååéç»è·¯ç±çä¸ä¸è·³å°å 0x143eãæä»¥è·¯ç±åç°å¯¹æ°æ®åéæ¹ 0x0351 æ¯å®å¨éæçï¼å®æ ¹æ¬ä¸ç¥éå¤é¢åçäºä»ä¹ï¼åªæ¯ææ°æ®åç»ç¶èç¹ã</li>
<li>156#ï¼æ°æ®æç»éå° 0x796f çç¶èç¹ 0x0000 ãç±äº 0x796f æ¯ä¸ªç¡ç ç ZED è®¾å¤ï¼æä»¥ 0x0000 åªå¥½ææ°æ®æå­ï¼æ²¡åæ³æéç» 0x796fã</li>
<li>160#-162#: è¿äºå°è¿ 2 ç§åï¼0x796f éæ¥ï¼å¨ MAC å±åéä¸ä¸ªå½ä»¤åç¶èç¹æ¥è¯¢ä»ç¡ç æé´æ¯å¦ææ°æ®å°æ¥ãè¿ä¸ªæ¶åï¼0x0000 ç»äºææºä¼ææå­çæ°æ®ååéç» 0x796f å­èç¹äºã</li>
<li>STEP 3ï¼å¨è¿éï¼æä»¬ææ<strong>ç ´åæä» 0x0351 å° 0x796f çè·¯ç±ï¼å³æ 0x143e èç¹æ­çµ</strong>ã</li>
<li>243#-245#: æ²¿çåæ¥åç°çè·¯ç±ï¼æ°æ®åä» 0x0351 -&gt; 0x0002 -&gt; 0x143eï¼è¿ä¸ªæ¶åå¼å¸¸åçäºï¼0x143e æ²¡æå¯¹æ¶æ¯è¿è¡ç¡®è®¤ (Acknowledgment)ãè¿ä¸ªæ¶å 0x0002 åç°äºå¼å¸¸ï¼åæ¥çè·¯ç±ä¸éäºãäºæ¯å®åèµ·äºä¸æ¬¡æ°çè·¯ç±åç°è¿ç¨ã</li>
<li>246#-251#: 0x0002 åèµ·äºæ°çè·¯ç±åç°è¿ç¨ï¼è¿æ¬¡åç°çæ°è·¯ç±æ¯ 0x0002 -&gt; 0x0001 -&gt; 0x0000 -&gt; 0x796fã</li>
<li>252#-254#: å¤ä½çè·¯ç±åç°å¹¿æ­ï¼è¿ä¸ä¸ªåå®éä¸æ¯è½¬å #246 çè·¯ç±åç°å¹¿æ­ãå ä¸ºä»ä»¬ç NwkSrc å NwkSeq æ¯ä¸æ ·çã</li>
<li>255#: è¿æ¯ä¸ªæºæææçåï¼æä»¬ç¥éç¡ç  ZED è®¾å¤æ¯å®æåç¶è®¾å¤æ¥è¯¢çå¶ç¡ç æé´æ¯å¦ææ°æ°æ®å°è¾¾ãè¿æ¬¡çæ¥è¯¢åç°æ²¡æç»ä»çæ°æ®ï¼æä»¥ ZED æ¥è¯¢å®å°±ç»§ç»­ç¡äºã</li>
<li>257#-262#: èç¹ 0x0351 æ²¿çæ°åç°çè·¯ç±ææ§å¶å½ä»¤éç» 0x796f çç¶èç¹ 0x0000 å¤ã0x0000 ç­å¾ 0x796f éæ¥ï¼æ¥è·åç»å®çæ°æ®ã</li>
<li>263#-265#: 0x796f ç»äºéè¿æ¥äºï¼åç¶è®¾å¤æ¥è¯¢æ°æ®ï¼å¹¶é¡ºå©å°æ¶å°äº 0x0351 åç»å®çæ§å¶å½ä»¤ã</li>
</ul>
<h2><a id="user-content-ç©ºä¸­æ°æ®å" class="anchor" href="#ç©ºä¸­æ°æ®å" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ç©ºä¸­æ°æ®å</h2>
<p>è¦çè§£ ZigBee åè®®ï¼å¯¹åè®®ç©ºä¸­åçè§£è¯»è³å³éè¦ãå®éä¸ ZigBee èçå¨å¯¹è®¾å¤è¿è¡å¼å®¹æ§æµè¯æ¶ï¼ä¸»è¦æ¯çç©ºä¸­åæ¯å¦ç¬¦ååè®®è§èï¼æ¯å¦äºç¸å¼å®¹ãå¶ä»çå¶å®é½æ¯é»çå­ãçè§£ç©ºä¸­ååæ ·å¯¹è°è¯éå¸¸æå¸®å©ï¼éè¿ç©ºä¸­åçåæï¼å¯ä»¥çå°ç½ç»ä¸­åªä¸ªèç¹æ BUGï¼ä¸ºä»ä¹ä¸ä¸ªæ°æ®åæ²¡æè¢«æ­£ç¡®å°éè¾¾ï¼å¸¦å®½æ¯å¦æé®é¢ï¼</p>
<p>ä¸ä¸ªå®æ´çç©ºä¸­ååå«å¾å¤å±ï¼ä¸»è¦æ MAC, NWK, APS, ZCL ç­ãä¸å¾æ¯ä¸ä¸ªå®æ´çç©ºä¸­åçå¸§ç»æ</p>
<p><a href="/wuzhongtao/web/blob/master/images/zigbee_frame.png" target="_blank"><img src="/wuzhongtao/web/raw/master/images/zigbee_frame.png" alt="zigbee frame" style="max-width:100%;"></a></p>
<p>ä¸äºè¯´æï¼</p>
<ul>
<li>ä¸åå±çå¸§æ¯å å èµ·æ¥çãæ¯å¦ NWK å±çå¸§æ°æ®æ¾å¨ MAC å±ç Payload éãAPS å±çå¸§æ°æ®æ¾å¨ NWK ç Payload éãZCL å±çå¸§æ¾å¨ APS ç Payload éã</li>
<li>æ¯å±çåå¤´é¿åº¦æ¯ä¸åºå®çï¼åæ°ä¸ååå¤´é¿åº¦ä¹ä¸åãæ¯å±çå¸§å¤´é½ä»¥ FC (Frame Control) ä½ä¸ºå¼å¤´ï¼FC å¯¹åå¤´çå¯éåæ°è¿è¡äºæè¿°ï¼å³åªäºå­æ®µåºç°å¨åå¤´ä¸­ï¼åªäºä¸åºç°ã</li>
<li>MAC å±çå¸§ä»¥ FCS (Frame Check Sum) ç»å°¾ãNWK å±çå¸§ä»¥å¯éç MIC (Message Integrity Code) ç»å°¾ãNWK AUX HDR å
NWK MIC åªåºç°å¨å¯ç¨äº NWK å±å®å¨æºå¶çç½ç»ä¸­ãAPS ä¹æå¯éçå®å¨æºå¶ï¼å¦æå®å¨æºå¶å¯ç¨çæåµä¸ APS AUX HDR å APS MIC å°åºç°å¨ APS å±æ°æ®å¸§ä¸­ã</li>
<li>MAC å¤´å NWK å¤´æ¯ä¸ºäºå¨èç¹ä¹é´å¯»åçãMAC å¤´æ§å¶éè·³çå¯»åï¼NWK å¤´æ§å¶æºèç¹å°ç®çèç¹çå¯»åãæä»¥ MAC å±çå°åå¨æ¯ä¸è·³é½ä¼æ¹åï¼è NWK å±çå°åä»å¤´å°å°¾é½ä¿æä¸è´ã</li>
</ul>
<p><a href="/wuzhongtao/web/blob/master/images/zigbee_frame.png" target="_blank"><img src="/wuzhongtao/web/raw/master/images/zigbee_frame.png" alt="zigbee frame" style="max-width:100%;"></a></p>
<p>è¿æ¯ MAC å NWK å¸§å¤´ä¿¡æ¯ãAPS å¸§å ZCL å¸§ä¸æ¯æ¬èçä¸»è¦åå®¹ï¼å°±ä¸è¯¦ç»ä»ç»ã</p>
<p><strong>ä¸ä¸ªæ°æ®å¸§çä¾å­</strong></p>
<pre><code>IEEE 802.15.4
    Frame Control: 0x8861
        .... .... .... .001 = Frame Type: Data (0x0001)
        .... .... .... 0... = Security Enabled: Disabled
        .... .... ...0 .... = Frame Pending: No more data
        .... .... ..1. .... = Acknowledgement Request: Acknowledgement required
        .... .... .1.. .... = Intra PAN: Within the PAN
        .... ..00 0... .... = Reserved
        .... 10.. .... .... = Destination Addressing Mode: Address field
                              contains a 16-bit short address (0x0002)
        ..00 .... .... .... = Reserved
        10.. .... .... .... = Source Addressing Mode: Address field contains
                              a 16-bit short address (0x0002)
    Sequence Number: 230
    Destination PAN Identifier: 0x0f00
    Destination Address: 0x0000
    Source Address: 0x0001
    Frame Check Sequence: Correct
ZigBee NWK
    Frame Control: 0x0248
        .... .... .... ..00 = Frame Type: NWK Data (0x00)
        .... .... ..00 10.. = Protocol Version (0x02)
        .... .... 01.. .... = Discover Route: Enable route discovery (0x01)
        .... ...0 .... .... = Multicast: Unicast or broadcast (0x00)
        .... ..1. .... .... = Security: Enabled
        .... .0.. .... .... = Source Route: Not present (0x00)
        .... 0... .... .... = Destination IEEE Address: Not Included
        ...0 .... .... .... = Source IEEE Address: Not Included
        000. .... .... .... = Reserved
    Destination Address: 0x796f
    Source Address: 0x1430
    Radius = 9
    Sequence Number = 174
ZigBee AUX
    Security Control: 0x28
        .... .000 = Security Level: Attributes: None; Encryption: Off; MIC:
                    No (M0) (0x00)
        ...0 1... = Key Identifier: Network (0x01)
        ..1. .... = Extended Nonce: Sender Address Field: Present (0x01)
        00.. .... = Reserved: (0x00)
    Frame Counter: 0x09
    Source Address: 0x0050c237b0040002
    Key Sequence Number: 0x00
    MIC: 00:fd:30:14
ZigBee APS
    Frame Control: 0x00
        .... ..00 = Frame Type: APS Data (0x00)
        .... 00.. = Delivery Mode: Normal Unicast Delivery (0x00)
        ...0 .... = Reserved
        ..0. .... = Security: False
        .0.. .... = Ack Request: Acknowledgement not required
        0... .... = Extended Header Present: Extended header is not present
    Destination Endpoint: 0x08
    Cluster Identifier: On/off (0x0006)
    Profile Identifier: HA (0x0104)
    Source Endpoint: 0x08
    Counter: 0x27
ZigBee ZCL
    Frame Control: 0x01
        .... ..01 = Frame Type: Command is specific to a cluster (0x01)
        .... .0.. = Manufacturer Specific: The manufacturer code field shall
                    not be included in the ZCL frame. (0x00)
        .... 0... = Direction: From the client side to the server side.(0x00)
        ...0 .... = Disable Default Response: Default response command will
                    be returned. (0x00)
        .... .... = Reserved: Reserved (0x00)
    Transaction Sequence Number: 0x42
    Command Identifier: Toggle (0x02)
</code></pre>
<p>ä¸äºè¯´æï¼</p>
<ul>
<li>IEEE 802.15.4 Frame Control: Security Enabled: Disabled: ä¸ææå°è¿ï¼ZigBee ä¸ºäºè½å¨è¶ä½ç«¯çè®¾å¤ä¸è¿è¡ï¼æ²¡æéç¨ IEEE 802.15.4 å®ä¹ç MAC å±å®å¨æºå¶ãZigBee çå®å¨æºå¶ä¸­ç± NWK å±ä¿è¯çãæä»¥è¿é MAC å±çå®å¨æºå¶æ¯å³é­çã</li>
<li>IEEE 802.15.4 Frame Control: Acknowledgement Request: Acknowledgement required: è¿éæ¯è¯·æ± MAC å±ç¡®è®¤çå¼å³ãè¿ä¸ªæ°æ®åéæ¯æå¼çï¼å¦ææ¯éå¯¹å¹¿æ­æ°æ®åï¼è¿ä¸ªå­æ®µå°±æ¯å³é­çãå ä¸ºå¹¿æ­æ¯æ²¡æç¡®è®¤çã</li>
<li>IEEE 802.15.4 Frame Control: Destination Addressing Mode: Source Addressing Mode: MAC å±çå°åæ ·å¼ãè¿éæ¯ä½¿ç¨ 16 bit ç­å°åãä½å¦ææ¯è®¾å¤çå¥ç½è¯·æ±æ°æ®åï¼è¿éå°±å¿é¡»ç¨ 64 bit çé¿å°åãå ä¸ºè¿æ²¡å¥ç½ï¼è¿ä¸ç¥éèªå·±çç­å°åï¼åªè½ç¨é¿å°åè¿è¡å¯»åã</li>
<li>IEEE 802.15.4 Sequence Number: MAC å±çååºåå·ï¼ç¨æ¥å¯ä¸å°æ è¯ä¸ä¸ª MAC å±çæ°æ®åãåºåå·æ¯ 8 bit çï¼å³è¿éåè®¾ä¸å¯è½åæ¶æ 256 ä¸ªå±äºåä¸ä¸ªèç¹çæ°æ®åå¨ç©ºä¸­ä¼ è¾ãå¦åå°±ä¼æå²çªã</li>
<li>IEEE 802.15.4 Source Address: æ³¨æå°è¿é MAC å±ä¹ä½¿ç¨ç­å°åãåæ¶å¯ä»¥çå° MAC å±çå°åå NWK å±çå°åæ¯ä¸ä¸æ ·çãå ä¸º MAC å±æ¯æ§å¶éè·³é´å¯»åçãè NWK æ¯åéæ¹åæ¥æ¶æ¹çå°åã</li>
<li>ZigBee NWK Frame Control: Protocol Version: è¿éçåè®®çæ¬æ¯ 2ï¼å®éä¸å¯¹ ZigBee åè®®ï¼è¿éé½æ¯ 2ãè¿ä¸ªå­æ®µå stack profile æ å³ãZigBee 2004 ççæ¬æ¯ 1 ï¼ZigBee 2006, 2007ï¼ZigBee Pro é½ä½¿ç¨ 2 ä½ä¸ºåè®®çæ¬å·ã</li>
<li>ZigBee NWK Frame Control: Security: Enabled: è¿ä¸ªæ å¿è¡¨æ NWK å±çå®å¨ä¸å¯ç¨çãè¿æ ·å¸§ä¸­å°±ä¼åºç°å¯éç NWK AUX å¸§ä¿¡æ¯ã</li>
<li>ZigBee AUX: è¿æ¯ NWK å±çå®å¨æºå¶å¯ç¨æ¶æä¼åºç°çæ°æ®ãå¶ä¸­æä¸¤ä¸ªå³é®çå­æ®µç¨æ¥ä¿è¯éä¿¡çå®å¨ãä¸ä¸ªæ¯ 32 bit ç Frame Counter ç¨æ¥æ è¯æ¶æ¯çæ°æ§ç¨åº¦ãå¦æä¿¡æ¯å¤ªæ§äºï¼ä¼è¢«æ¥æ¶æ¹æç»ãè¿ä¸ªæºå¶å¯ä»¥é¿åéæ¾æ»å»ãå¦å¤ä¸ä¸ªå­æ®µæ¯ MICï¼è¿ä¸ªå­æ®µæ¯ä¸ºäºé¿åä¸­é´äººä¿®æ¹æ°æ®ãMIC æ¯ç¨ 128 bit çå®å¨å¯é¥çæçï¼ä»»ä½ä¿®æ¹æ¶æ¯ä½çè¡ä¸ºé½ä¼å¯¼è´è§£å¯å¤±è´¥ãè¿éæ¶åå° ZigBee çç½ç»å®å¨æºå¶ï¼åæ¬è¯ä¹¦ä¼ è¾ï¼å®å¨ä¸­å¿ (Trust Center) ç­æ¦å¿µãéè¦ä¸é¨çæç« æ¥ä»ç»ã</li>
<li>ZigBee APS: è¿éåå«åºç¨å±çä¿¡æ¯ãå¯¹è¿ä¸ªå¸§æ¥è¯´ï¼æä»¬å¯ä»¥çå°è¿æ¯ä¸ªåæ­ä¿¡æ¯ï¼APS å±çå®å¨æºå¶æ¯å³é­çãæä»¥ä¸ä¼åºç° APS AUX å¸§æ°æ®äºãExtended Header Present ä¸º 0ï¼è¡¨ç¤ºä¸ªåºç¨å±æ°æ®æ²¡æååï¼å¨ä¸ä¸ªåéå°±ä¼ è¾å®äºãAck Request ä¸º 0 è¡¨æ APS å±çç«¯å¯¹ç«¯ç¡®è®¤æ¶æ¯æ¯å³é­çã</li>
<li>ZigBee ZCL: æåä¸å¸§æ¯ ZCL å¸§ä¿¡æ¯ãå®åå« ZigBee Cluster Library ä¿¡æ¯ãAPS å ZCL éè¦å¦å¤çæç« æ¥ä»ç» ZigBee åºç¨å±çç¸å³åè®®ã</li>
</ul>
<p>åçä¸ä¸ªå¯é¥ä¼ è¾çä¾å­ãä¸ä¸ªè®¾å¤å å¥ç½ç»ï¼å®å¨ä¸­å¿åéäºä¸ä»½å¯é¥ç»æ°è®¾å¤ãè¿æ ·æ°è®¾å¤å°±å¯ä»¥ä½¿ç¨è¿ä¸ªå¯é¥å¨ç½ç»ä¸­éä¿¡ãæ²¡æå¯é¥çè®¾å¤ç±äºæ æ³çæç¸åºçå å¯ä¿¡æ¯ï¼éä¿¡ä¼å¤±è´¥ã</p>
<pre><code>Frame 10 (Length = 56 bytes)
IEEE 802.15.4
ZigBee NWK
    Frame Control: 0x0008
    Destination Address: 0x0001
    Source Address: 0x0000
    Radius = 10
    Sequence Number = 185
ZigBee APS
    Frame Control: 0x01
    Counter: 0x2b
    APS Payload
    APS Command Identifier = Transport Key: (0x05)
    KeyTransport.CommandPayload
    Key Type: Network Key (0x01)
    Key: 04:03:02:01:04:03:02:01:04:03:02:01:04:03:02:01
    Sequence Number: 0
    Destination Address: 00:50:c2:37:b0:04:00:02
    Source Address: 00:50:c2:37:b0:04:00:01
</code></pre>
<p>å¨ä¸ä¸ª ZigBee å®å¨ç½ç»éï¼å¯é¥å¯ä»¥åºåå¨èç¹éï¼ä¹å¯ä»¥å¨èç¹å å¥ç½ç»æ¶ç±å®å¨ä¸­å¿ (ä¸è¬ç± ZC å¼ä»») åéè¯ä¹¦ç»æ°å¥ç½çèç¹ãå¦ææ¯ç±å®å¨ä¸­å¿å¨å¥ç½æ¶åéè¯ä¹¦ï¼å®éä¸è¿æ¯æ´é²äºä¸ä¸ªå®å¨æ¼æ´ï¼å ä¸ºè¿éåéçè¯ä¹¦æ¯å¯ä»¥è¢«åæ¢å°çã</p>
<h2><a id="user-content-zigbee-stack-profiles" class="anchor" href="#zigbee-stack-profiles" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>ZigBee Stack Profiles</h2>
<p>ç°è¡æä¸¤ä¸ª ZigBee stack profileï¼ä¸ä¸ªæ¯ 01ï¼ä»£è¡¨ ZigBee 2006, ZigBee 2007 çæ¬çåè®®ãå¦å¤ä¸ä¸ªæ¯ 02ï¼ä»£è¡¨ ZigBee Pro çæ¬çåè®®ã</p>
<p>Stack Profile 01 ç¨å¨ææ¬ææåçè®¾å¤ä¸ãå®æå¦ä¸ç¹ç¹ï¼</p>
<ul>
<li>å¯é¢æµçå°ååéç­ç¥ï¼å°±æ¯ä¸æä»ç»ç CSkip å°ååéæ¹æ¡</li>
<li>æ ç¶è·¯ç±</li>
<li>æ´å°çä»£ç å°ºå¯¸ï¼æå³çæ´ä½ç ROM å RAM éæ±</li>
<li>æ°æ®åæå¤ä¼  10 è·³ãè¿æå³çç½ç»è§æ¨¡è¾å°</li>
</ul>
<p>Stack Profile 02 ä¹ç§°ä¸º ZigBee Proãå®ä¸æ¯ææ ç¶è·¯ç±ï¼ä½å¢å äºæºç«è·¯ç±ãå®ç¨å¨ææ¬ä¸æ¯ç¬¬ä¸èèå ç´ ï¼ç½ç»è§æ¨¡ææ¯ç¬¬ä¸èèå ç´ çåºæ¯ä¸ãä¸»è¦æä»¥ä¸ç¹å¾ï¼</p>
<ul>
<li>éæºçå°ååé</li>
<li>æºç«è·¯ç±</li>
<li>å¤æ­</li>
<li>æ´å¤§çä»£ç å°ºå¯¸ï¼æå³çæ´å¤§ç ROM å RAM éæ±</li>
<li>æ°æ®åæå¤å¯ä¼  30 è·³ãè¿æå³çç½ç»è§æ¨¡è¾å¤§</li>
</ul>
<p>ä¸¤ä¸ªçæ¬çåè®®é½æ¯æåæ­ï¼å¹¿æ­ï¼ç»ï¼ç«¯ç¹ï¼ç°ç­åè®®ãå®éåºç¨ä¸­ï¼æå¤§çå·®å«å¨äºå¯¹ ROM å RAM çè¦æ±ä¸åï¼å°ååéæ¹æ¡ä¸åï¼å¯éçè·¯ç±ä¸åï¼ä»¥åæ°æ®åä¼ è¾çæå¤§è·³æ°ä¸åã</p>
<p>Stack Profile ççæ¬å¨ä¿¡æ æä»¤éåç°çãå¦ä¸æä»ç»ï¼ä¿¡æ æä»¤æ¯ç¨æ¥åç°ç½ç»çãæä»¬çä¸ä¸ª Stack Profile 02 çä¿¡æ æä»¤ï¼</p>
<pre><code>IEEE 802.15.4
NWK Layer Information: 0x8422
    .... .... .... 0010 = Stack Profile (0x2)
    .... .... 0010 .... = nwkcProtocolVersion (0x2)
    .... ..00 .... .... = Reserved (0x0)
    .... .1.. .... .... = Router Capacity: True
    .000 0... .... .... = Device Depth (0x0)
    1... .... .... .... = End Device Capacity: True
    Extended PAN ID: 0x0050c237b0040001
</code></pre>
<p>ä¸é¢æ¯ä¸ä¸ª stack profile 01 çä¿¡æ æä»¤ï¼</p>
<pre><code>IEEE 802.15.4
NWK Layer Information: 0x8421
    .... .... .... 0001 = Stack Profile (0x1)
    .... .... 0010 .... = nwkcProtocolVersion (0x2)
    .... ..00 .... .... = Reserved (0x0)
    .... .1.. .... .... = Router Capacity: True
    .000 0... .... .... = Device Depth (0x0)
    1... .... .... .... = End Device Capacity: True
    Extended PAN ID: 0x0050c211dc051801
</code></pre>
<p>éè¦æ³¨æçæ¯ stack profile 01 å stack profile 02 çè®¾å¤å¯ä»¥å å¥å¯¹æ¹çç½ç»ï¼å³ä»ä»¬æ¯å¼å®¹çãä½å¯¹è·¯ç±å¨è®¾å¤èè¨ï¼å¦æä¸æ¯æç½ç»çè·¯ç±æ¹æ³ï¼åå¿é¡»ä»¥ ZED çèº«ä»½å å¥ç½ç»ãä¸è¬æåµä¸ï¼åè®®è¯çä¾åºåæä¾ä¼æä¾åè®®çæ¬çéæ©ãæäºæä¾ç¼è¯æ¶éæ©ï¼æäºæä¾è¿è¡æ¶éæ©ãç¼è¯æ¶éæ©æºå¶å¯ä»¥åå° ROM å ç¨ãèè¿è¡æ¶éæ© ROM å ç¨ä¼æ¯è¾å¤§ï¼ä¸»è¦æä¾äºè®¾å¤ççµæ´»æ§ã</p>
<h2><a id="user-content-faq" class="anchor" href="#faq" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FAQ</h2>
<ul>
<li>i-jia ç³»ç»çæ ç¶è·¯ç±æ¯å¦ä½¿è½ï¼
Aï¼æ²¡æä½¿è½</li>
<li>i-jia åè°å¨å¨ç»ç½æ¶ï¼ä½¿ç¨ä»ä¹ç­ç¥æ¥å³å®éä¿¡ä¿¡éï¼
Aï¼ç®åæ¯å®æ­»å¨ 15 ä¿¡é</li>
<li>i-jia åè°å¨å¨ç»ç½æ¶ï¼ä½¿ç¨ä»ä¹ç­ç¥æ¥å³å® PAN IDï¼
Aï¼éä¾¿ 0xffï¼ç±åè®®æ éæºå³å®</li>
<li>i-jia ç³»ç»æ¯å¦å¯ç¨ ExtendedPANIDï¼
Aï¼å¯ç¨ç</li>
<li>i-jia ç³»ç»ç MAC å°åæ¯æä»¬å¬å¸ä¹°çä¹ï¼å¬å¸çç»ç»ç¼ç æ¯å¤å°ï¼
Aï¼TI åºåçæ¶åå·²ç»åå¥½äº TI ç³è¯·ç MAC å°åãç®åæä»¬ç´æ¥ä½¿ç¨ï¼æ²¡æç¨æä»¬èªå·±ç³è¯·</li>
<li>i-jia ç³»ç»çè®¾å¤æåªäºæ¯ ZRï¼åªäºæ¯ ZEDï¼
Aï¼ææ§å¨åææ¯é¢æ¿æ¯ ZEDï¼ä¼è¿å¥ç¡ç ãå¶ä»çé½æ¯ ZRï¼ä¸è¿å¥ç¡ç </li>
<li>i-jia ç³»ç»ç ZR æ¯å¦éç½®ä¸ºåè®¸è®¾å¤å¥ç½åè½ï¼
Aï¼ZR æ¯å¯ä»¥åè®¸è®¾å¤å¥ç½ï¼ä½æ»å¼å³è¿æ¯å¨ ZC ä¸ï¼å³ App æ§å¶ ZC æ¯å¦åè®¸è®¾å¤å¥ç½ï¼ZC ä¼æè¿ä¸ªå¼å³ä¼ éç»ææç ZRã</li>
<li>i-jia ç³»ç»çè·¯ç±å¨çè·¯ç±è¡¨å¤§å°æ¯å¤å°ï¼
Aï¼ç®åæ¯ 16 ä¸ª</li>
<li>i-jia ç³»ç»å¦ä½ç»´æ¤è·¯ç±è¡¨ï¼å³è¡¨æ»¡äºæä¹åï¼
Aï¼æ»¡äºå°±ä¸å¤ç</li>
<li>257# ä¸ºä»ä¹ 0x0002 ä¸ç´æ¥ååéæ°æ®åï¼èæ¯è¦ç­è¶æ¶åç± 0x0351 éåï¼
Aï¼è¿éå¯è½æ¶åå° APS å±å NWK å±çéåæºå¶ãç®å APS å±æéåæºå¶ï¼NWK å±ä¹æéåæºå¶ã</li>
<li>i-jia ç³»ç»æ¯å¦å¯ç¨ zigbee NWK å±å APS å±çå®å¨æºå¶ï¼
Aï¼NWK å±å¯ç¨äºå®å¨æºå¶ï¼APS æ²¡æå¯ç¨</li>
<li>å¦æå¯ç¨å®å¨æºå¶ï¼é£ä¹å®å¨ä¸­å¿ä¸è¬ä½¿ç¨ä»ä¹ç®æ³æ¥å¤æ­å­è®¾å¤æ¯å¦æ¯ä¸ªåæ³çè®¾å¤ï¼ä»èå³å®è¦ä¸è¦ç»å­è®¾å¤åéå¯é¥ï¼
Aï¼ç®åææçè®¾å¤é½é¢ç½®ä¸ä¸ª HA å¯é¥ãTC ä¼æ æ¡ä»¶ç»å¥ç½çæ°è®¾å¤åéç¨ HA å¯é¥å å¯çç½ç»å¯é¥ãç®åé½ä½¿ç¨ AES å å¯ç®æ³ã</li>
<li>i-jia ä½¿ç¨ stack profile 01 è¿æ¯ stack profile 02?
Aï¼ç®åä½¿ç¨ stack profile 02ãä½æ²¡æä½¿ç¨æºç«è·¯ç±åè½ã</li>
<li>i-jia ä¸ TI æä¾çæ¹æ¡ï¼stack profile æ¯ç¼è¯æ¶å³å®çè¿æ¯è¿è¡æ¶å³å®çï¼
Aï¼TI åè®®æ ç®ååªæä¾ stack profile 02ï¼ä¸æä¾ stack profile 01</li>
<li>TI å¼åç¯å¢éï¼åªä¸ªç¼è¯å¼å³æå®è¿ä¸ªè®¾å¤çç±»å ZC, ZR, ZEDï¼</li>
<li>i-jia ç³»ç»éï¼ZR å ZED å¥ç½æ¶ï¼æ¥æ¾åªä¸ª PAN IDï¼</li>
<li>i-jia ç³»ç»éï¼å°ååéæ¹æ¡æ¯éç¨ zigbee profile 01 ç CSkip è¿æ¯ä½¿ç¨ zigbee profile 02 çéæºåéç­ç¥ï¼</li>
<li>i-jia ç³»ç»éï¼ZED è®¾å¤æ¯å¦æå¨ MAC å±å®æ¶è½®è¯¢å¶ç¶èç¹çæ¯å¦æåç»ä»çæ°æ®ï¼å¦ææï¼æ¶é´æ¯å¤é¿ï¼</li>
<li>i-jia ç³»ç»ç Broadcast Trasaction Table (BTT) å¤§å°æ¯å¤å°ï¼</li>
</ul>
</article>
  </div>

  </div>

  <button type="button" data-facebox="#jump-to-line" data-facebox-class="linejump" data-hotkey="l" class="d-none">Jump to Line</button>
  <div id="jump-to-line" style="display:none">
    <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="" class="js-jump-to-line-form" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
      <input class="form-control linejump-input js-jump-to-line-field" type="text" placeholder="Jump to line&hellip;" aria-label="Jump to line" autofocus>
      <button type="submit" class="btn">Go</button>
</form>  </div>

  </div>
  <div class="modal-backdrop js-touch-events"></div>
</div>

    </div>
  </div>

  </div>

      
<div class="footer container-lg px-3" role="contentinfo">
  <div class="position-relative d-flex flex-justify-between py-6 mt-6 f6 text-gray border-top border-gray-light ">
    <ul class="list-style-none d-flex flex-wrap ">
      <li class="mr-3">&copy; 2017 <span title="0.14922s from unicorn-816483557-wtdp0">GitHub</span>, Inc.</li>
        <li class="mr-3"><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li class="mr-3"><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li class="mr-3"><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li class="mr-3"><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>

    <a href="https://github.com" aria-label="Homepage" class="footer-octicon" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
    <ul class="list-style-none d-flex flex-wrap ">
        <li class="mr-3"><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
      <li class="mr-3"><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li class="mr-3"><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li class="mr-3"><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li class="mr-3"><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>
  </div>
</div>



  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
    You can't perform that action at this time.
  </div>


    
    <script crossorigin="anonymous" integrity="sha256-ADlWtmO0Qfn/6JFR8DV8xKaQfuJQgDIYo/A0n82SxfQ=" src="https://assets-cdn.github.com/assets/frameworks-003956b663b441f9ffe89151f0357cc4a6907ee250803218a3f0349fcd92c5f4.js"></script>
    
    <script async="async" crossorigin="anonymous" integrity="sha256-nXnQhJxf2BtbV1cl++rkmqQWyF4WfZEtNW1zDkZSScg=" src="https://assets-cdn.github.com/assets/github-9d79d0849c5fd81b5b575725fbeae49aa416c85e167d912d356d730e465249c8.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>


  </body>
</html>

